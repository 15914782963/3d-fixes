//
// Generated by Microsoft (R) HLSL Shader Compiler 9.29.952.3111
//
// Parameters:
//
//   float3 gAmbientColor[2];
//   bool gEnvMappingEnable;
//   float4 gEyePosition;
//   float4 gHDRRate;
//   float3 gHemisphereVector;
//   float4 gLightAttnPoint[2];
//   row_major float3x3 gLightColorDir;
//   float4 gLightColorPoint[4];
//   row_major float3x3 gLightDirection;
//   float4 gLightPosition[4];
//   bool gPointLightEnable0;
//   bool gPointLightEnable1;
//   bool gPointLightEnable2;
//   bool gPointLightEnable3;
//   row_major float4x4 gReflectMatrix;
//   float3 gRimColor;
//   row_major float4x4 gShadingWorldViewProj;
//   bool gShadowEnable;
//   row_major float4x4 gShadowMatrix;
//   float3 gShadowOffset;
//   float3 gShadowVector;
//   sampler2D gSkinningMatricesSampler;
//   float4 gSpecularColor;
//   row_major float4x4 gStaticTransformMatrix;
//   float4 gUVMaskForReflect[3];
//   float4 gUVOffset0;
//   float4 gUVOffset1;
//   float4 gUVOffset2;
//   float4 gUVScaleByReflect[3];
//   bool gUseMultiUV;
//   float3 gVelvetyColor;
//   float4 gVelvetyRimParam;
//   bool gVertexBlendEnable2;
//   row_major float4x4 gWorldViewProj;
//
//
// Registers:
//
//   Name                     Reg   Size
//   ------------------------ ----- ----
//   gUseMultiUV              b0       1
//   gPointLightEnable0       b1       1
//   gPointLightEnable1       b2       1
//   gPointLightEnable2       b3       1
//   gPointLightEnable3       b4       1
//   gEnvMappingEnable        b5       1
//   gShadowEnable            b6       1
//   gVertexBlendEnable2      b10      1
//   gStaticTransformMatrix   c0       4
//   gShadingWorldViewProj    c4       4
//   gUVOffset0               c8       1
//   gUVOffset1               c9       1
//   gUVOffset2               c10      1
//   gShadowVector            c11      1
//   gShadowOffset            c12      1
//   gAmbientColor            c13      2
//   gLightDirection          c15      3
//   gLightColorDir           c18      3
//   gLightColorPoint         c21      4
//   gSpecularColor           c26      1
//   gVelvetyColor            c28      1
//   gRimColor                c29      1
//   gVelvetyRimParam         c30      1
//   gHDRRate                 c31      1
//   gWorldViewProj           c50      4
//   gReflectMatrix           c58      4
//   gUVScaleByReflect        c62      3
//   gUVMaskForReflect        c65      3
//   gEyePosition             c81      1
//   gShadowMatrix            c90      4
//   gHemisphereVector        c95      1
//   gLightPosition           c96      4
//   gLightAttnPoint          c100     2
//   gSkinningMatricesSampler s3       1
//

    vs_3_0
    def c25, 0.00390625, 0.000651041686, 0.001953125, 0.00325520826
    def c27, 0.000651041686, 0, 0.5, 8
    def c32, 0.5, -0.5, 0, 0
    def c33, 1, 0, 0.001953125, 0.00325520826
    dcl_position v0
    dcl_texcoord v1
    dcl_texcoord1 v2
    dcl_texcoord2 v3
    dcl_normal v4
    dcl_blendweight v5
    dcl_blendindices v6
    dcl_2d s3
    dcl_position o0
    dcl_texcoord6 o1
    dcl_color1 o2
    dcl_texcoord o3
    dcl_texcoord1 o4
    dcl_texcoord2 o5
    dcl_texcoord3 o6.xyz
    dcl_texcoord4 o7.xyz
    dcl_texcoord5 o8
    dcl_texcoord7 o9

def c220, 0, 1, 0.0625, 0.5
dcl_2d s0

    if b10
      frc r0, v6
      add r1, -r0, v6
      slt r2, v6, -v6
      slt r0, -r0, r0
      mad r0, r2, r0, r1
      mul r1, r0, c25.x
      mad r0, r0.xxxy, c25.x, c25.yzwy
      mul r2, r0.x, c33.xyyy
      texldl r2, r2, s3
      mul r3, r0.yxxx, c33.xyyy
      texldl r3, r3, s3
      mul r4, r0.zxxx, c33.xyyy
      texldl r4, r4, s3
      mul r0, r0.wxxx, c33.xyyy
      texldl r0, r0, s3
      mul r5, r1.yxxx, c33.xyyy
      add r6, r5, c33.zyyy
      texldl r6, r6, s3
      add r5, r5, c33.wyyy
      texldl r5, r5, s3
      mul r7, r1.zxxx, c33.xyyy
      add r8, r7, c27.xyyy
      texldl r8, r8, s3
      add r9, r7, c33.zyyy
      texldl r9, r9, s3
      add r7, r7, c33.wyyy
      texldl r7, r7, s3
      mul r1, r1.wxxx, c33.xyyy
      add r10, r1, c27.xyyy
      texldl r10, r10, s3
      add r11, r1, c33.zyyy
      texldl r11, r11, s3
      add r1, r1, c33.wyyy
      texldl r1, r1, s3
      mul r0, r0, v5.y
      mul r6, r6, v5.y
      mul r5, r5, v5.y
      mad r0, v5.x, r2, r0
      mad r2, v5.x, r3, r6
      mad r3, v5.x, r4, r5
      mad r0, v5.z, r8, r0
      mad r2, v5.z, r9, r2
      mad r3, v5.z, r7, r3
      mad r0, v5.w, r10, r0
      mad r2, v5.w, r11, r2
      mad r1, v5.w, r1, r3
      dp4 r3.x, v0, r0
      dp4 r3.y, v0, r2
      dp4 r3.z, v0, r1
      mul r4, r3.y, c51
      mad r4, r3.x, c50, r4
      mad r4, r3.z, c52, r4
      add r4, r4, c53
      dp3 r0.x, v4, r0
      dp3 r0.y, v4, r2
      dp3 r0.z, v4, r1
      nrm r1.xyz, r0
    else
      mul r0.xyz, c1, v0.y
      mad r0.xyz, v0.x, c0, r0
      mad r0.xyz, v0.z, c2, r0
      add r3.xyz, r0, c3
      mul r0, c5, v0.y
      mad r0, v0.x, c4, r0
      mad r0, v0.z, c6, r0
      add r4, r0, c7
      mul r0.xyz, c1, v4.y
      mad r0.xyz, v4.x, c0, r0
      mad r0.xyz, v4.z, c2, r0
      nrm r1.xyz, r0
    endif
    add r0.xyz, r3, -c81
    nrm r2.xyz, r0
    dp3 r0.x, r2, r1
    add r0.x, r0.x, r0.x
    mad r0.xyz, r1, -r0.x, r2
    if b0
      add r5.xy, c8, v1
      add r6, c9, v2
      add r7, c10, v3
    else
      add r5.xy, c8, v1
      mov r6, r5.xyxy
      mov r7, r5.xyxy
    endif
    if b5
      mul r8, r1.y, c59.xyxy
      mad r8, r1.x, c58.xyxy, r8
      mad r8, r1.z, c60.xyxy, r8
      add r8, r8, c61.xyxy
      mul r5.zw, r8, c65.xyxy
      mad o3.xy, r5, c62, r5.zwzw
      mul r9, r8.zwzw, c66
      mad o4, r6, c63, r9
      mul r8, r8, c67
      mad o5, r7, c64, r8
    else
      mov o4, r6
      mov o5, r7
      mov o3.xy, r5
    endif
    dp3 r0.w, r1, -r2
    mad_sat r0.w, r0_abs.w, c30.z, c30.w
    dp3 r1.w, r1, c95
    mov r5.xyz, c14
    mad r5.xyz, r1.w, r5, c13
    dp3 r6.x, c15, r1
    dp3 r6.y, c16, r1
    dp3 r6.z, c17, r1
    dp3_sat r7.x, c15, r2
    dp3_sat r7.y, c16, r2
    dp3_sat r7.z, c17, r2
    mov_sat r8.xyz, r6
    mul r9.xyz, r8.x, c18
    mul r10.xyz, r8.z, c20
    mad r10.xyz, r8.y, c19, r10
    mad_sat r11.xyz, r6, c30.x, c30.y
    add r8.yzw, -r8.xxyz, r11.xxyz
    mul r11.xyz, r8.z, c19
    mad r11.xyz, r8.y, c18, r11
    mad r8.yzw, r8.w, c20.xxyz, r11.xxyz
    mad r8.yzw, r8, c28.xxyz, r10.xxyz
    add r10.xyz, -r6, c33.x
    mul_sat r10.xyz, r10, c27.z
    mul r7.xyz, r7, r10
    mul r7.xyz, r0.w, r7
    mul r10.xyz, r7.y, c19
    mad r7.xyw, r7.x, c18.xyzz, r10.xyzz
    mad r7.xyz, r7.z, c20, r7.xyww
    mad r7.xyz, r7, c29, r8.yzww
    dp3_sat r10.x, c15, r0
    dp3_sat r10.y, c16, r0
    dp3_sat r10.z, c17, r0
    mul_sat r6.xyz, r6, c27.w
    slt r8.yzw, -r10.xxyz, r10.xxyz
    pow r1.w, r10.x, c26.w
    mul r11.x, r1.w, r8.y
    pow r1.w, r10.y, c26.w
    mul r11.y, r1.w, r8.z
    pow r1.w, r10.z, c26.w
    mul r11.z, r1.w, r8.w
    mul r6.xyw, r6.yzzx, r11.yzzx
    mul r8.yzw, r6.y, c20.xxyz
    mad r8.yzw, r6.x, c19.xxyz, r8
    mul r10.xy, r6, c31.x
    add r1.w, r10.y, r10.x
    if b1
      add r10.xyz, -r3, c96
      dp3 r2.w, r10, r10
      mov r11, c100
      mad_sat r3.w, r11.x, r2.w, c21.w
      mul r12.xyz, r3.w, c21
      mad r3.w, r11.y, r2.w, c33.x
      rcp r3.w, r3.w
      mul r12.xyz, r3.w, r12
      rsq r2.w, r2.w
      mul r10.xyz, r2.w, r10
      dp3 r2.w, r10, r1
      dp3_sat r2.x, r10, r2
      mov_sat r2.y, r2.w
      mul r13.xyz, r12, r2.y
      add r2.y, -r2.w, c33.x
      mul_sat r2.yw, r2, c27.xzzw
      mul r2.x, r2.y, r2.x
      mul r0.w, r0.w, r2.x
      mul r2.xyz, r12, r0.w
      dp3_sat r0.w, r10, r0
      slt r3.w, -r0.w, r0.w
      pow r5.w, r0.w, c26.w
      mul r0.w, r3.w, r5.w
      mul r0.w, r2.w, r0.w
      mul r10.xyz, r12, r0.w
      mul r0.w, r0.w, c31.x
      if b2
        add r12.xyz, -r3, c97
        dp3 r2.w, r12, r12
        mad_sat r3.w, r11.z, r2.w, c22.w
        mul r11.xyz, r3.w, c22
        mad r3.w, r11.w, r2.w, c33.x
        rcp r3.w, r3.w
        mul r11.xyz, r3.w, r11
        rsq r2.w, r2.w
        mul r12.xyz, r2.w, r12
        dp3 r2.w, r12, r1
        mov_sat r3.w, r2.w
        mad r13.xyz, r3.w, r11, r13
        dp3_sat r3.w, r12, r0
        mul_sat r2.w, r2.w, c27.w
        slt r5.w, -r3.w, r3.w
        pow r7.w, r3.w, c26.w
        mul r3.w, r5.w, r7.w
        mul r2.w, r2.w, r3.w
        mad r10.xyz, r2.w, r11, r10
        mad r0.w, r2.w, c31.x, r0.w
        if b3
          add r11.xyz, -r3, c98
          dp3 r2.w, r11, r11
          mov r12, c101
          mad_sat r3.w, r12.x, r2.w, c23.w
          mul r14.xyz, r3.w, c23
          mad r3.w, r12.y, r2.w, c33.x
          rcp r3.w, r3.w
          mul r14.xyz, r3.w, r14
          rsq r2.w, r2.w
          mul r11.xyz, r2.w, r11
          dp3 r2.w, r11, r1
          mov_sat r3.w, r2.w
          mad r13.xyz, r3.w, r14, r13
          dp3_sat r3.w, r11, r0
          mul_sat r2.w, r2.w, c27.w
          slt r5.w, -r3.w, r3.w
          pow r7.w, r3.w, c26.w
          mul r3.w, r5.w, r7.w
          mul r2.w, r2.w, r3.w
          mad r10.xyz, r2.w, r14, r10
          mad r0.w, r2.w, c31.x, r0.w
          if b4
            add r11.xyz, -r3, c99
            dp3 r2.w, r11, r11
            mad_sat r3.w, r12.z, r2.w, c24.w
            mul r12.xyz, r3.w, c24
            mad r3.w, r12.w, r2.w, c33.x
            rcp r3.w, r3.w
            mul r12.xyz, r3.w, r12
            rsq r2.w, r2.w
            mul r11.xyz, r2.w, r11
            dp3 r2.w, r11, r1
            mov_sat r3.w, r2.w
            mad r13.xyz, r3.w, r12, r13
            dp3_sat r0.x, r11, r0
            mul_sat r0.y, r2.w, c27.w
            slt r0.z, -r0.x, r0.x
            pow r2.w, r0.x, c26.w
            mul r0.x, r0.z, r2.w
            mul r0.x, r0.y, r0.x
            mad r10.xyz, r0.x, r12, r10
            mad r0.w, r0.x, c31.x, r0.w
          endif
        endif
      endif
      add r0.xyz, r7, r13
      mad r7.xyz, r2, c29, r0
      add r8.yzw, r8, r10.xxyz
      add r1.w, r0.w, r1.w
    endif
    add r0.xyz, r5, r7
    add r0.w, r1.w, c31.y
    if b6
      mul r2, r3.y, c91
      mad r2, r3.x, c90, r2
      mad r2, r3.z, c92, r2
      add r2, r2, c93
      dp3 r5.w, r1, c11
      mad r1.w, c12.y, r5_abs.w, c12.x
      mad o9.z, r1.w, r2.w, r2.z
      mov o9.xyw, r2
      mov o1.xyz, r0
      mov r6.xyz, r9
    else
      mad o1.xyz, r8.x, c18, r0
      mad r8.yzw, r6.w, c18.xxyz, r8
      mad r0.w, r6.w, c31.x, r0.w
      mov o9, c33.y
      mov r6, c33.y
      mov r5.w, c33.x
    endif
    mul r5.xyz, r8.yzww, c26
    add o1.w, r0.w, c31.w

mov o0, r4 // Relocated from line 378 with shadertool.py

// Automatic vertex shader halo fix inserted with DarkStarSword's shadertool.py:
// shadertool.py -i -f --only-autofixed --auto-fix-vertex-halo D187A36C.txt
texldl r15, c220.z, s0
add r15.w, r4.w, -r15.y
mad r4.x, r15.w, r15.x, r4.x

    mul r0.xyz, r4.xyww, c32.xyxw
    add r0.xy, r0.z, r0
    rcp r0.z, r4.w
    mul o3.zw, r0.z, r0.xyxy

//     mov o0, r4 // Relocated to line 374 with shadertool.py
    mov o2, r5
    mov o6.xyz, r1
    mov o7.xyz, r3
    mov o8, r6

// approximately 326 instruction slots used (24 texture, 302 arithmetic)
