// asmtool.py --remap-cb 1 101 -i --only-autofixed --disable-driver-stereo-cb 12 1d6dbae690f5c4f9-cs.txt
//
// Generated by Microsoft (R) D3D Shader Disassembler
//
//   using 3Dmigoto v1.2.63 on Tue Sep 12 13:32:52 2017
//
//
// Input signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// no Input
//
// Output signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// no Output
cs_5_0
dcl_globalFlags refactoringAllowed
dcl_constantbuffer cb0[23], immediateIndexed
dcl_constantbuffer cb1[54], immediateIndexed
dcl_constantbuffer cb2[5], immediateIndexed
dcl_resource_texture2d (float,float,float,float) t0
dcl_resource_texture2d (float,float,float,float) t1
dcl_uav_typed_texture2d (float,float,float,float) u0
dcl_uav_typed_texture2d (float,float,float,float) u1
dcl_input vThreadIDInGroupFlattened
dcl_input vThreadGroupID.xy
dcl_input vThreadID.xy
dcl_temps 6
dcl_tgsm_structured g0, 16, 256
dcl_thread_group 16, 16, 1
dcl_resource_structured t101, 864

// cb1 remapped to t101 with DarkStarSword's asmtool.py:
// asmtool.py --remap-cb 1 101 -i --only-autofixed --disable-driver-stereo-cb 12 1d6dbae690f5c4f9-cs.txt
ld_structured_indexable(structured_buffer, stride=864)(mixed,mixed,mixed,mixed) r5.xyzw, l(0), l(848), t101.xyzw

iadd r0.xy, vThreadID.xyxx, cb0[16].xyxx
mov r0.zw, l(0,0,0,0)
ld_indexable(texture2d)(float,float,float,float) r1.xy, r0.xyww, t0.xyzw
ld_indexable(texture2d)(float,float,float,float) r2.z, r0.xyzw, t1.yzxw
lt r0.z, l(0.000000), r1.x
mad r1.xy, r1.xyxx, l(4.008016, 4.008016, 0.000000, 0.000000), l(-2.00397754, -2.00397754, 0.000000, 0.000000)
utof r1.zw, vThreadID.xxxy
add r1.zw, r1.zzzw, l(0.000000, 0.000000, 0.500000, 0.500000)
iadd r3.xy, -cb0[16].xyxx, cb0[16].zwzz
utof r3.xy, r3.xyxx
div r2.xy, r1.zwzz, r3.xyxx
dp3 r0.w, r2.xyzx, cb2[0].xyzx
add r0.w, r0.w, cb2[0].w
rcp r0.w, r0.w
mul r1.zw, r2.yyyy, cb2[1].xxxw
mad r1.z, cb2[1].y, r2.z, r1.z
add r1.z, r1.z, cb2[1].z
mad r1.z, r2.x, r1.z, r1.w
mul r3.xy, r2.xyxx, r2.xyxx
mad r1.z, r3.x, cb2[2].x, r1.z
mad r1.z, cb2[2].y, r2.z, r1.z
add r1.z, r1.z, cb2[2].z
mul r1.z, r0.w, r1.z
mul r4.x, r1.z, l(-2.000000)
mul r1.zw, r2.xxxx, cb2[3].xxxw
mad r1.z, cb2[3].y, r2.z, r1.z
add r1.z, r1.z, cb2[3].z
mad r1.z, r2.y, r1.z, r1.w
mad r1.z, r3.y, cb2[4].x, r1.z
mad r1.z, cb2[4].y, r2.z, r1.z
add r1.z, r1.z, cb2[4].z
dp2 r4.y, r0.wwww, r1.zzzz
movc r1.xy, r0.zzzz, r1.xyxx, r4.xyxx
mul r1.z, r1.y, -cb0[22].x
dp2 r0.z, r1.xzxx, r1.xzxx
sqrt r3.x, r0.z
max r0.z, |r1.z|, |r1.x|
min r0.w, |r1.z|, |r1.x|
div r0.z, r0.w, r0.z
mul r0.w, r0.z, r0.z
mad r1.y, r0.w, l(0.0872929022), l(-0.301895)
mad r0.w, r1.y, r0.w, l(1.000000)
mul r1.y, r0.z, r0.w
lt r1.w, |r1.x|, |r1.z|
mad r0.z, -r0.w, r0.z, l(1.57079637)
movc r0.z, r1.w, r0.z, r1.y
lt r1.xy, r1.xzxx, l(0.000000, 0.000000, 0.000000, 0.000000)
add r0.w, -r0.z, l(3.14159274)
movc r0.z, r1.x, r0.w, r0.z
movc r1.yw, r1.yyyy, -r0.zzzz, r0.zzzz
ult r0.zw, r0.xxxy, cb0[16].zzzw
and r0.z, r0.w, r0.z
if_nz r0.z
  mad r3.y, r1.w, l(0.159154937), l(0.500000)
  mad r0.w, r2.z, r5.x, r5.y
  mad r2.x, r2.z, r5.z, -r5.w
  div r2.x, l(1.000000, 1.000000, 1.000000, 1.000000), r2.x
  add r3.zw, r0.wwww, r2.xxxx
  store_uav_typed u0.xyzw, r0.xyyy, r3.xyzw
endif 
div r0.x, cb0[22].w, cb0[22].y
min r0.x, r0.x, r3.x
movc r1.x, r0.z, r0.x, l(2.000000)
and r1.z, r0.x, r0.z
store_structured g0.xyzw, vThreadIDInGroupFlattened.x, l(0), r1.xyzw
sync_g_t
ult r0.xyzw, vThreadIDInGroupFlattened.xxxx, l(128, 64, 32, 16)
if_nz r0.x
  iadd r0.x, vThreadIDInGroupFlattened.x, l(128)
  ld_structured r2.xyzw, r0.x, l(0), g0.xyzw
  lt r0.x, r1.x, r2.x
  movc r3.xy, r0.xxxx, r1.xwxx, r2.xyxx
  lt r0.x, r2.z, r1.z
  movc r3.zw, r0.xxxx, r1.zzzw, r2.zzzw
  store_structured g0.xyzw, vThreadIDInGroupFlattened.x, l(0), r3.xyzw
endif 
sync_g_t
if_nz r0.y
  ld_structured r1.xyzw, vThreadIDInGroupFlattened.x, l(0), g0.xyzw
  iadd r0.x, vThreadIDInGroupFlattened.x, l(64)
  ld_structured r2.xyzw, r0.x, l(0), g0.xyzw
  lt r0.x, r1.x, r2.x
  movc r3.xy, r0.xxxx, r1.xyxx, r2.xyxx
  lt r0.x, r2.z, r1.z
  movc r3.zw, r0.xxxx, r1.zzzw, r2.zzzw
  store_structured g0.xyzw, vThreadIDInGroupFlattened.x, l(0), r3.xyzw
endif 
sync_g_t
if_nz r0.z
  ld_structured r1.xyzw, vThreadIDInGroupFlattened.x, l(0), g0.xyzw
  iadd r0.x, vThreadIDInGroupFlattened.x, l(32)
  ld_structured r2.xyzw, r0.x, l(0), g0.xyzw
  lt r0.x, r1.x, r2.x
  movc r3.xy, r0.xxxx, r1.xyxx, r2.xyxx
  lt r0.x, r2.z, r1.z
  movc r3.zw, r0.xxxx, r1.zzzw, r2.zzzw
  store_structured g0.xyzw, vThreadIDInGroupFlattened.x, l(0), r3.xyzw
endif 
if_nz r0.w
  ld_structured r0.xyzw, vThreadIDInGroupFlattened.x, l(0), g0.xyzw
  iadd r1.x, vThreadIDInGroupFlattened.x, l(16)
  ld_structured r1.xyzw, r1.x, l(0), g0.xyzw
  lt r2.x, r0.x, r1.x
  movc r2.xy, r2.xxxx, r0.xyxx, r1.xyxx
  lt r0.x, r1.z, r0.z
  movc r2.zw, r0.xxxx, r0.zzzw, r1.zzzw
  store_structured g0.xyzw, vThreadIDInGroupFlattened.x, l(0), r2.xyzw
endif 
ult r0.xyzw, vThreadIDInGroupFlattened.xxxx, l(8, 4, 2, 1)
if_nz r0.x
  ld_structured r1.xyzw, vThreadIDInGroupFlattened.x, l(0), g0.xyzw
  iadd r0.x, vThreadIDInGroupFlattened.x, l(8)
  ld_structured r2.xyzw, r0.x, l(0), g0.xyzw
  lt r0.x, r1.x, r2.x
  movc r3.xy, r0.xxxx, r1.xyxx, r2.xyxx
  lt r0.x, r2.z, r1.z
  movc r3.zw, r0.xxxx, r1.zzzw, r2.zzzw
  store_structured g0.xyzw, vThreadIDInGroupFlattened.x, l(0), r3.xyzw
endif 
if_nz r0.y
  ld_structured r1.xyzw, vThreadIDInGroupFlattened.x, l(0), g0.xyzw
  iadd r0.x, vThreadIDInGroupFlattened.x, l(4)
  ld_structured r2.xyzw, r0.x, l(0), g0.xyzw
  lt r0.x, r1.x, r2.x
  movc r3.xy, r0.xxxx, r1.xyxx, r2.xyxx
  lt r0.x, r2.z, r1.z
  movc r3.zw, r0.xxxx, r1.zzzw, r2.zzzw
  store_structured g0.xyzw, vThreadIDInGroupFlattened.x, l(0), r3.xyzw
endif 
if_nz r0.z
  ld_structured r1.xyzw, vThreadIDInGroupFlattened.x, l(0), g0.xyzw
  iadd r0.x, vThreadIDInGroupFlattened.x, l(2)
  ld_structured r2.xyzw, r0.x, l(0), g0.xyzw
  lt r0.x, r1.x, r2.x
  movc r3.xy, r0.xxxx, r1.xyxx, r2.xyxx
  lt r0.x, r2.z, r1.z
  movc r3.zw, r0.xxxx, r1.zzzw, r2.zzzw
  store_structured g0.xyzw, vThreadIDInGroupFlattened.x, l(0), r3.xyzw
endif 
if_nz r0.w
  ld_structured r0.xyzw, l(0), l(0), g0.xyzw
  ld_structured r1.xyzw, l(1), l(0), g0.xyzw
  lt r2.x, r0.x, r1.x
  movc r2.xy, r2.xxxx, r0.xyxx, r1.xyxx
  lt r0.x, r1.z, r0.z
  movc r2.zw, r0.xxxx, r0.zzzw, r1.zzzw
  store_structured g0.xyzw, l(0), l(0), r2.xyzw
endif 
if_z vThreadIDInGroupFlattened.x
  ld_structured r0.xyzw, l(0), l(0), g0.xyzw
  sincos r1.x, r2.x, r0.y
  mov r2.y, r1.x
  mul r1.xy, r0.xxxx, r2.xyxx
  sincos r0.x, r2.x, r0.w
  mov r2.z, r2.x
  mov r2.w, r0.x
  mul r1.zw, r0.zzzz, r2.zzzw
  store_uav_typed u1.xyzw, vThreadGroupID.xyyy, r1.xyzw
endif 
ret 
// Approximately 0 instruction slots used