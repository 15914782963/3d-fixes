// DeferredLightPixelShaders.usf (most noticeable looking at the grass at the surface immediately after the shark encounter)

// ---- Created with 3Dmigoto v1.2.42 on Sat Oct 01 18:32:02 2016
Texture2D<uint4> t14 : register(t14);

Texture2D<float4> t13 : register(t13);

Texture2D<float4> t12 : register(t12);

Texture2D<float4> t11 : register(t11);

Texture2D<float4> t10 : register(t10);

Texture2D<float4> t9 : register(t9);

Texture2D<float4> t8 : register(t8);

Texture2D<float4> t7 : register(t7);

Texture2D<float4> t6 : register(t6);

Texture2D<float4> t5 : register(t5);

Texture2D<float4> t4 : register(t4);

Texture3D<float4> t3 : register(t3);

Texture2D<float4> t2 : register(t2);

Texture2D<float4> t1 : register(t1);

Texture2D<float4> t0 : register(t0);

SamplerState s9_s : register(s9);

SamplerState s8_s : register(s8);

SamplerState s7_s : register(s7);

SamplerState s6_s : register(s6);

SamplerState s5_s : register(s5);

SamplerState s4_s : register(s4);

SamplerState s3_s : register(s3);

SamplerState s2_s : register(s2);

SamplerState s1_s : register(s1);

SamplerState s0_s : register(s0);

cbuffer cb3 : register(b3)
{
  float4 cb3[7];
}

cbuffer cb2 : register(b2)
{
  float4 cb2[26];
}

cbuffer cb1 : register(b1)
{
  float4 cb1[33];
}

cbuffer cb0 : register(b0)
{
  float4 cb0[54];
}




// 3Dmigoto declarations
#define cmp -
Texture1D<float4> IniParams : register(t120);
Texture2D<float4> StereoParams : register(t125);

#include "matrix.hlsl"

void main( 
  float4 v0 : TEXCOORD0,
  float3 v1 : TEXCOORD1,
  float4 v2 : SV_POSITION0,
  out float4 o0 : SV_Target0)
{
  float4 r0,r1,r2,r3,r4,r5,r6,r7,r8,r9,r10,r11,r12,r13,r14,r15,r16,r17,r18;
  uint4 bitmask, uiDest;
  float4 fDest;

  r0.xyzw = t7.SampleLevel(s3_s, v0.xy, 0).xyzw;
  r1.xy = cb1[3].xy * v0.xy;
  r1.xy = (uint2)r1.xy;
  r0.w = 255 * r0.w;
  r0.w = round(r0.w);
  r0.w = (uint)r0.w;
  r2.x = (int)r0.w & 15;
  r2.y = cmp(0 < (uint)r2.x);
  r1.zw = float2(0,0);
  r1.z = t14.Load(r1.xyz).x;
  r1.z = (int)r1.z & asint(cb3[6].y);
  r1.z = cmp((int)r1.z != 0);
  r1.z = r1.z ? r2.y : 0;
  if (r1.z != 0) {
    r1.z = dot(v1.xyz, v1.xyz);
    r1.z = rsqrt(r1.z);
    r2.yzw = v1.xyz * r1.zzz;
    r3.xyz = t6.SampleLevel(s2_s, v0.xy, 0).xyz;
    r4.xyzw = t8.SampleLevel(s4_s, v0.xy, 0).xyzw;
    r5.xyzw = t9.SampleLevel(s5_s, v0.xy, 0).xyzw;

// Depth:
    r1.z = t10.SampleLevel(s6_s, v0.xy, 0).x;
    r1.z = r1.z * cb0[51].z + -cb0[51].w;
    r1.z = 1 / r1.z;

    r1.w = (uint)cb1[32].x;
    r1.x = (int)r1.x + (int)r1.y;
    r1.x = (int)r1.x + (int)r1.w;
    r1.x = (int)r1.x & 1;
    r3.xyz = r3.xyz * float3(2,2,2) + float3(-1,-1,-1);
    r1.y = dot(r3.xyz, r3.xyz);
    r1.y = rsqrt(r1.y);
    r6.xyz = r3.xyz * r1.yyy;
    r1.w = (int)r0.w & 16;
    r5.xyzw = r1.wwww ? float4(0,0,0,0) : r5.xyzw;
    r1.w = cmp((int)r2.x == 5);
    r7.xyzw = r1.xxxx ? float4(1,1,1,0) : float4(0,0,0,1);
    r8.xyz = r4.xyz;
    r8.w = r0.y;
    r7.xyzw = r1.wwww ? r7.xyzw : r8.xyzw;
    r4.xyz = -r7.xyz * r0.xxx + r7.xyz;
    r0.y = 0.0799999982 * r7.w;
    r8.xyz = -r7.www * float3(0.0799999982,0.0799999982,0.0799999982) + r7.xyz;
    r8.xyz = r0.xxx * r8.xyz + r0.yyy;
    r4.xyz = r4.xyz * cb1[5].www + cb1[5].xyz;
    r8.xyz = r8.xyz * cb1[6].www + cb1[6].xyz;
    r9.xyz = v1.xyz * r1.zzz;

// Correct the lighting in the distance using the ClipToTranslatedWorld matrix:
float4 s = StereoParams.Load(0);
r9.xyz -= mul(float4(s.x * (r1.z - s.y), 0, 0, 0), MATRIX(cb0, 32));

    r10.xyz = t5.SampleLevel(s1_s, v0.xy, 0).xyz;
    r11.xyzw = t11.SampleLevel(s7_s, v0.xy, 0).xyzw;
    r12.xyzw = r11.xyzw * r11.xyzw;
    r0.y = saturate(dot(r6.xyz, cb3[2].xyz));
    if (cb3[6].x != 0) {
      r1.xw = (int2)r0.ww & int2(32,64);
      r0.w = r1.w ? 0 : 1;
      r0.w = r1.x ? r0.w : 1;
      r1.x = dot(cb3[5].xyzw, float4(1,1,1,1));
      r0.w = dot(r0.wwww, cb3[5].xyzw);
      r0.w = -1 + r0.w;
      r0.w = r1.x * r0.w + 1;
      r1.x = saturate(r1.z * cb3[4].z + cb3[4].w);
      r1.x = r1.x * r1.x;
      r11.xy = -r11.xy * r11.xy + r0.ww;
      r1.xw = r1.xx * r11.xy + r12.xy;
      r0.w = min(r1.w, r12.w);
      r1.x = r1.x * r12.z;
      r0.w = r0.w * r12.z;
    } else {
      r1.x = t12.SampleLevel(s8_s, v0.xy, 0).x;
      r0.w = 1;
    }
    r11.x = r5.y;
    r11.y = r0.z;
    r11.z = 1;
    r11.xyz = max(cb3[4].xxx, r11.xyz);
    r12.xyz = r11.xyz * r11.xyz;
    r1.w = dot(r2.yzw, r6.xyz);
    r1.w = r1.w + r1.w;
    r13.xyz = r6.xyz * -r1.www + r2.yzw;
    r1.w = dot(cb3[2].xyz, cb3[2].xyz);
    r1.w = rsqrt(r1.w);
    r11.zw = cmp(float2(0,0) < cb3[3].wz);
    if (r11.z != 0) {
      r3.w = cb3[3].w * r1.w;
      r3.w = min(1, r3.w);
      r14.xyz = r3.www * float3(0.5,0.5,0.5) + r12.xyz;
      r14.xyz = min(float3(1,1,1), r14.xyz);
      r14.xyz = r12.xyz / r14.xyz;
      r15.xyz = cb3[3].www * cb3[2].xyz;
      r16.xyz = -r15.xyz * float3(0.5,0.5,0.5) + cb3[2].xyz;
      r3.w = dot(r13.xyz, r15.xyz);
      r17.xyz = r3.www * r13.xyz + -r15.xyz;
      r6.w = dot(r16.xyz, r17.xyz);
      r3.w = r3.w * r3.w;
      r3.w = cb3[3].w * cb3[3].w + -r3.w;
      r3.w = saturate(r6.w / r3.w);
      r15.xyz = r3.www * r15.xyz + r16.xyz;
    } else {
      r15.xyz = cb3[2].xyz;
      r14.xyz = float3(1,1,1);
    }
    if (r11.w != 0) {
      r1.w = cb3[3].z * r1.w;
      r1.w = min(1, r1.w);
      r16.xyz = r1.www * float3(0.5,0.5,0.5) + r12.xyz;
      r16.xyz = min(float3(1,1,1), r16.xyz);
      r12.xyz = r12.xyz / r16.xyz;
      r12.xyz = r12.xyz * r12.xyz;
      r14.xyz = r14.xyz * r12.xyz;
      r1.w = dot(r15.xyz, r13.xyz);
      r12.xyz = r1.www * r13.xyz + -r15.xyz;
      r1.w = dot(r12.xyz, r12.xyz);
      r1.w = rsqrt(r1.w);
      r1.w = cb3[3].z * r1.w;
      r1.w = min(1, r1.w);
      r15.xyz = r12.xyz * r1.www + r15.xyz;
    }
    r1.w = dot(r15.xyz, r15.xyz);
    r1.w = rsqrt(r1.w);
    r12.xyz = r15.xyz * r1.www;
    switch (r2.x) {
      case 1 :      case 2 :      case 3 :      case 5 :      case 6 :      r16.xyz = r14.zzz * r4.xyz;
      r13.xyz = float3(0.318309873,0.318309873,0.318309873) * r16.xyz;
      break;
      case 4 :      r16.xyz = r15.xyz * r1.www + -r2.yzw;
      r3.w = dot(r16.xyz, r16.xyz);
      r3.w = rsqrt(r3.w);
      r16.xyz = r16.xyz * r3.www;
      r3.w = saturate(dot(r6.xyz, r12.xyz));
      r6.w = dot(r6.xyz, -r2.yzw);
      r6.w = max(9.99999975e-006, r6.w);
      r8.w = saturate(dot(r6.xyz, r16.xyz));
      r9.w = saturate(dot(-r2.yzw, r16.xyz));
      r11.zw = r11.xy * r11.xy;
      r16.xy = r11.zw * r11.zw;
      r16.zw = r8.ww * r16.xy + -r8.ww;
      r16.zw = r16.zw * r8.ww + float2(1,1);
      r16.zw = r16.zw * r16.zw;
      r16.zw = float2(3.14159274,3.14159274) * r16.zw;
      r16.xy = r16.xy / r16.zw;
      r8.w = r16.x * r14.x;
      r10.w = r9.w * r9.w;
      r10.w = r10.w * 4 + 9.99999975e-006;
      r10.w = rcp(r10.w);
      r9.w = 1 + -r9.w;
      r11.z = r9.w * r9.w;
      r11.z = r11.z * r11.z;
      r12.w = r11.z * r9.w;
      r9.w = -r11.z * r9.w + 1;
      r11.z = r9.w * 0.0399999991 + r12.w;
      r13.w = r11.z * r5.x;
      r8.w = r10.w * r8.w;
      r10.w = -r11.z * r5.x + 1;
      r11.z = r16.y * r14.y;
      r14.w = 0.5 * r11.w;
      r11.w = -r11.w * 0.5 + 1;
      r6.w = r6.w * r11.w + r14.w;
      r3.w = r3.w * r11.w + r14.w;
      r3.w = r6.w * r3.w;
      r3.w = 0.25 / r3.w;
      r6.w = saturate(50 * r8.y);
      r16.xyz = r9.www * r8.xyz;
      r16.xyz = r6.www * r12.www + r16.xyz;
      r17.xyz = r14.zzz * r4.xyz;
      r3.w = r11.z * r3.w;
      r16.xyz = r3.www * r16.xyz;
      r16.xyz = r17.xyz * float3(0.318309873,0.318309873,0.318309873) + r16.xyz;
      r16.xyz = r16.xyz * r10.www;
      r13.xyz = r8.www * r13.www + r16.xyz;
      break;
      case 8 :      r16.xyzw = saturate(r5.xyzw);
      r17.xyz = r15.xyz * r1.www + -r2.yzw;
      r3.w = dot(r17.xyz, r17.xyz);
      r3.w = rsqrt(r3.w);
      r17.xyz = r17.xyz * r3.www;
      r3.w = saturate(dot(r6.xyz, r12.xyz));
      r6.w = dot(r6.xyz, -r2.yzw);
      r6.w = max(9.99999975e-006, r6.w);
      r8.w = saturate(dot(r6.xyz, r17.xyz));
      r9.w = saturate(dot(-r2.yzw, r17.xyz));
      r17.xyz = r14.zzz * r4.xyz;
      r9.w = 1 + -r9.w;
      r10.w = r9.w * r9.w;
      r10.w = r10.w * r10.w;
      r11.z = r10.w * r9.w;
      r11.w = 50 * r16.y;
      r11.w = min(1, r11.w);
      r9.w = -r10.w * r9.w + 1;
      r16.xyz = r9.www * r16.xyz;
      r16.xyz = r11.www * r11.zzz + r16.xyz;
      r10.w = r11.y * r11.y;
      r11.w = r10.w * r10.w;
      r12.w = -r11.w * r8.w + r8.w;
      r12.w = r12.w * r8.w + r11.w;
      r13.w = 4 * r11.w;
      r14.w = r11.w * 4 + 1;
      r14.w = 3.14159274 * r14.w;
      r14.w = rcp(r14.w);
      r13.w = r13.w * r11.w;
      r12.w = r12.w * r12.w;
      r12.w = r13.w / r12.w;
      r12.w = 1 + r12.w;
      r12.w = r14.w * r12.w;
      r13.w = r6.w + r3.w;
      r13.w = -r3.w * r6.w + r13.w;
      r13.w = 4 * r13.w;
      r13.w = rcp(r13.w);
      r12.w = r13.w * r12.w;
      r13.w = saturate(50 * r8.y);
      r18.xyz = r9.www * r8.xyz;
      r18.xyz = r13.www * r11.zzz + r18.xyz;
      r9.w = r11.w * r8.w + -r8.w;
      r8.w = r9.w * r8.w + 1;
      r8.w = r8.w * r8.w;
      r8.w = 3.14159274 * r8.w;
      r8.w = r11.w / r8.w;
      r8.w = r8.w * r14.y;
      r9.w = -r11.y * r11.y + 1;
      r11.z = r6.w * r9.w + r10.w;
      r9.w = r3.w * r9.w + r10.w;
      r6.w = r9.w * r6.w;
      r3.w = r3.w * r11.z + r6.w;
      r3.w = rcp(r3.w);
      r3.w = r8.w * r3.w;
      r3.w = 0.5 * r3.w;
      r18.xyz = r3.www * r18.xyz;
      r16.xyz = r12.www * r16.xyz + -r18.xyz;
      r16.xyz = r16.www * r16.xyz + r18.xyz;
      r13.xyz = r17.xyz * float3(0.318309873,0.318309873,0.318309873) + r16.xyz;
      break;
      case 9 :      r16.xyz = r15.xyz * r1.www + -r2.yzw;
      r3.w = dot(r16.xyz, r16.xyz);
      r3.w = rsqrt(r3.w);
      r16.xyz = r16.xyz * r3.www;
      r3.w = saturate(dot(r6.xyz, r12.xyz));
      r6.w = dot(r6.xyz, -r2.yzw);
      r6.w = max(9.99999975e-006, r6.w);
      r8.w = saturate(dot(r6.xyz, r16.xyz));
      r9.w = saturate(dot(-r2.yzw, r16.xyz));
      r10.w = r11.y * r11.y;
      r11.z = r10.w * r10.w;
      r11.w = r8.w * r11.z + -r8.w;
      r8.w = r11.w * r8.w + 1;
      r8.w = r8.w * r8.w;
      r8.w = 3.14159274 * r8.w;
      r8.w = r11.z / r8.w;
      r8.w = r8.w * r14.y;
      r11.z = -r11.y * r11.y + 1;
      r11.w = r6.w * r11.z + r10.w;
      r10.w = r3.w * r11.z + r10.w;
      r6.w = r10.w * r6.w;
      r3.w = r3.w * r11.w + r6.w;
      r3.w = rcp(r3.w);
      r3.w = r8.w * r3.w;
      r6.w = 1 + -r9.w;
      r8.w = r6.w * r6.w;
      r8.w = r8.w * r8.w;
      r9.w = r8.w * r6.w;
      r10.w = saturate(50 * r8.y);
      r6.w = -r8.w * r6.w + 1;
      r16.xyz = r6.www * r8.xyz;
      r16.xyz = r10.www * r9.www + r16.xyz;
      r3.w = 0.5 * r3.w;
      r13.xyz = r3.www * r16.xyz;
      break;
      default :
      r13.xyz = float3(0,0,0);
      break;
    }
    switch (r2.x) {
      case 1 :      case 2 :      case 3 :      case 5 :      case 6 :      r17.xyz = r15.xyz * r1.www + -r2.yzw;
      r3.w = dot(r17.xyz, r17.xyz);
      r3.w = rsqrt(r3.w);
      r17.xyz = r17.xyz * r3.www;
      r3.w = saturate(dot(r6.xyz, r12.xyz));
      r6.w = dot(r6.xyz, -r2.yzw);
      r6.w = max(9.99999975e-006, r6.w);
      r8.w = saturate(dot(r6.xyz, r17.xyz));
      r9.w = saturate(dot(-r2.yzw, r17.xyz));
      r10.w = r11.y * r11.y;
      r11.z = r10.w * r10.w;
      r11.w = r8.w * r11.z + -r8.w;
      r8.w = r11.w * r8.w + 1;
      r8.w = r8.w * r8.w;
      r8.w = 3.14159274 * r8.w;
      r8.w = r11.z / r8.w;
      r8.w = r8.w * r14.y;
      r11.z = -r11.y * r11.y + 1;
      r11.w = r6.w * r11.z + r10.w;
      r10.w = r3.w * r11.z + r10.w;
      r6.w = r10.w * r6.w;
      r3.w = r3.w * r11.w + r6.w;
      r3.w = rcp(r3.w);
      r3.w = r8.w * r3.w;
      r6.w = 1 + -r9.w;
      r8.w = r6.w * r6.w;
      r8.w = r8.w * r8.w;
      r9.w = r8.w * r6.w;
      r10.w = saturate(50 * r8.y);
      r6.w = -r8.w * r6.w + 1;
      r17.xyz = r6.www * r8.xyz;
      r17.xyz = r10.www * r9.www + r17.xyz;
      r3.w = 0.5 * r3.w;
      r16.xyz = r3.www * r17.xyz;
      break;
      case 4 :      r17.xyz = r15.xyz * r1.www + -r2.yzw;
      r3.w = dot(r17.xyz, r17.xyz);
      r3.w = rsqrt(r3.w);
      r17.xyz = r17.xyz * r3.www;
      r3.w = saturate(dot(r6.xyz, r12.xyz));
      r6.w = dot(r6.xyz, -r2.yzw);
      r6.w = max(9.99999975e-006, r6.w);
      r8.w = saturate(dot(r6.xyz, r17.xyz));
      r9.w = saturate(dot(-r2.yzw, r17.xyz));
      r11.xz = r11.xy * r11.xy;
      r11.xw = r11.xz * r11.xz;
      r17.xy = r8.ww * r11.xw + -r8.ww;
      r17.xy = r17.xy * r8.ww + float2(1,1);
      r17.xy = r17.xy * r17.xy;
      r17.xy = float2(3.14159274,3.14159274) * r17.xy;
      r11.xw = r11.xw / r17.xy;
      r8.w = r11.x * r14.x;
      r10.w = r9.w * r9.w;
      r10.w = r10.w * 4 + 9.99999975e-006;
      r10.w = rcp(r10.w);
      r9.w = 1 + -r9.w;
      r11.x = r9.w * r9.w;
      r11.x = r11.x * r11.x;
      r12.w = r11.x * r9.w;
      r9.w = -r11.x * r9.w + 1;
      r11.x = r9.w * 0.0399999991 + r12.w;
      r13.w = r11.x * r5.x;
      r8.w = r10.w * r8.w;
      r10.w = -r11.x * r5.x + 1;
      r11.x = r11.w * r14.y;
      r11.w = 0.5 * r11.z;
      r11.z = -r11.z * 0.5 + 1;
      r6.w = r6.w * r11.z + r11.w;
      r3.w = r3.w * r11.z + r11.w;
      r3.w = r6.w * r3.w;
      r3.w = 0.25 / r3.w;
      r6.w = saturate(50 * r8.y);
      r17.xyz = r9.www * r8.xyz;
      r17.xyz = r6.www * r12.www + r17.xyz;
      r18.xyz = r14.zzz * r4.xyz;
      r3.w = r11.x * r3.w;
      r11.xzw = r3.www * r17.xyz;
      r11.xzw = r18.xyz * float3(0.318309873,0.318309873,0.318309873) + r11.xzw;
      r11.xzw = r11.xzw * r10.www;
      r16.xyz = r8.www * r13.www + r11.xzw;
      break;
      case 8 :      r17.xyzw = saturate(r5.xyzw);
      r11.xzw = r15.xyz * r1.www + -r2.yzw;
      r3.w = dot(r11.xzw, r11.xzw);
      r3.w = rsqrt(r3.w);
      r11.xzw = r11.xzw * r3.www;
      r3.w = saturate(dot(r6.xyz, r12.xyz));
      r6.w = dot(r6.xyz, -r2.yzw);
      r6.w = max(9.99999975e-006, r6.w);
      r8.w = saturate(dot(r6.xyz, r11.xzw));
      r9.w = saturate(dot(-r2.yzw, r11.xzw));
      r11.xzw = r14.zzz * r4.xyz;
      r9.w = 1 + -r9.w;
      r10.w = r9.w * r9.w;
      r10.w = r10.w * r10.w;
      r12.w = r10.w * r9.w;
      r13.w = 50 * r17.y;
      r13.w = min(1, r13.w);
      r9.w = -r10.w * r9.w + 1;
      r14.xzw = r9.www * r17.xyz;
      r14.xzw = r13.www * r12.www + r14.xzw;
      r10.w = r11.y * r11.y;
      r13.w = r10.w * r10.w;
      r15.w = -r13.w * r8.w + r8.w;
      r15.w = r15.w * r8.w + r13.w;
      r16.w = 4 * r13.w;
      r17.x = r13.w * 4 + 1;
      r17.x = 3.14159274 * r17.x;
      r17.x = rcp(r17.x);
      r16.w = r16.w * r13.w;
      r15.w = r15.w * r15.w;
      r15.w = r16.w / r15.w;
      r15.w = 1 + r15.w;
      r15.w = r17.x * r15.w;
      r16.w = r6.w + r3.w;
      r16.w = -r3.w * r6.w + r16.w;
      r16.w = 4 * r16.w;
      r16.w = rcp(r16.w);
      r15.w = r16.w * r15.w;
      r16.w = saturate(50 * r8.y);
      r17.xyz = r9.www * r8.xyz;
      r17.xyz = r16.www * r12.www + r17.xyz;
      r9.w = r13.w * r8.w + -r8.w;
      r8.w = r9.w * r8.w + 1;
      r8.w = r8.w * r8.w;
      r8.w = 3.14159274 * r8.w;
      r8.w = r13.w / r8.w;
      r8.w = r8.w * r14.y;
      r9.w = -r11.y * r11.y + 1;
      r12.w = r6.w * r9.w + r10.w;
      r9.w = r3.w * r9.w + r10.w;
      r6.w = r9.w * r6.w;
      r3.w = r3.w * r12.w + r6.w;
      r3.w = rcp(r3.w);
      r3.w = r8.w * r3.w;
      r3.w = 0.5 * r3.w;
      r17.xyz = r3.www * r17.xyz;
      r14.xzw = r15.www * r14.xzw + -r17.xyz;
      r14.xzw = r17.www * r14.xzw + r17.xyz;
      r16.xyz = r11.xzw * float3(0.318309873,0.318309873,0.318309873) + r14.xzw;
      break;
      case 9 :      r11.xzw = r15.xyz * r1.www + -r2.yzw;
      r3.w = dot(r11.xzw, r11.xzw);
      r3.w = rsqrt(r3.w);
      r11.xzw = r11.xzw * r3.www;
      r3.w = saturate(dot(r6.xyz, r12.xyz));
      r6.w = dot(r6.xyz, -r2.yzw);
      r6.w = max(9.99999975e-006, r6.w);
      r8.w = saturate(dot(r6.xyz, r11.xzw));
      r9.w = saturate(dot(-r2.yzw, r11.xzw));
      r10.w = r11.y * r11.y;
      r11.x = r10.w * r10.w;
      r11.z = r8.w * r11.x + -r8.w;
      r8.w = r11.z * r8.w + 1;
      r8.w = r8.w * r8.w;
      r8.w = 3.14159274 * r8.w;
      r8.w = r11.x / r8.w;
      r8.w = r8.w * r14.y;
      r11.x = -r11.y * r11.y + 1;
      r11.y = r6.w * r11.x + r10.w;
      r10.w = r3.w * r11.x + r10.w;
      r6.w = r10.w * r6.w;
      r3.w = r3.w * r11.y + r6.w;
      r3.w = rcp(r3.w);
      r3.w = r8.w * r3.w;
      r6.w = 1 + -r9.w;
      r8.w = r6.w * r6.w;
      r8.w = r8.w * r8.w;
      r9.w = r8.w * r6.w;
      r10.w = saturate(50 * r8.y);
      r6.w = -r8.w * r6.w + 1;
      r8.xyz = r6.www * r8.xyz;
      r8.xyz = r10.www * r9.www + r8.xyz;
      r3.w = 0.5 * r3.w;
      r16.xyz = r3.www * r8.xyz;
      break;
      default :
      r16.xyz = float3(0,0,0);
      break;
    }
    r0.y = r1.x * r0.y;
    r8.xyz = r10.xyz * r0.yyy;
    r11.xyz = r16.xyz + r13.xyz;
    r13.xyz = r5.xyz * r5.xyz;
    switch (r2.x) {
      case 2 :      r16.xyz = r15.xyz * r1.www + -r2.yzw;
      r0.y = dot(r16.xyz, r16.xyz);
      r0.y = rsqrt(r0.y);
      r16.xyz = r16.xyz * r0.yyy;
      r0.y = saturate(dot(r12.xyz, r2.yzw));
      r0.y = log2(r0.y);
      r0.y = 12 * r0.y;
      r0.y = exp2(r0.y);
      r1.x = r5.w * -2.9000001 + 3;
      r0.y = r1.x * r0.y;
      r1.x = dot(r6.xyz, r16.xyz);
      r1.x = r1.x * r5.w + 1;
      r1.x = saturate(r1.x + -r5.w);
      r1.x = r4.w * r1.x;
      r2.x = 0.159154937 * r1.x;
      r1.x = -r1.x * 0.159154937 + 1;
      r0.y = r0.y * r1.x + r2.x;
      r14.xyz = r13.xyz * r0.yyy;
      break;
      case 3 :      r0.y = dot(r6.xyz, r12.xyz);
      r16.x = saturate(r0.y * 0.5 + 0.5);
      r16.y = 1 + -r5.w;
      r16.xyz = t13.SampleLevel(s9_s, r16.xy, 0).xyz;
      r14.xyz = r16.xyz * r13.xyz;
      break;
      case 6 :      r0.y = dot(-r6.xyz, r12.xyz);
      r0.y = 0.5 + r0.y;
      r0.y = saturate(0.444444448 * r0.y);
      r1.x = saturate(dot(-r2.yzw, -r12.xyz));
      r1.x = r1.x * r1.x;
      r1.x = r1.x * -0.639999986 + 1;
      r1.x = r1.x * r1.x;
      r1.x = 0.114591561 / r1.x;
      r0.y = r1.x * r0.y;
      r14.xyz = r0.yyy * r13.xyz;
      break;
      case 7 :      r0.y = dot(-r2.yzw, r12.xyz);
      r1.x = dot(r6.xyz, r12.xyz);
      r2.x = dot(r6.xyz, -r2.yzw);
      r3.w = 1 + -abs(r2.x);
      r3.w = sqrt(r3.w);
      r4.w = abs(r2.x) * -0.0187292993 + 0.0742610022;
      r4.w = r4.w * abs(r2.x) + -0.212114394;
      r4.w = r4.w * abs(r2.x) + 1.57072878;
      r6.w = r4.w * r3.w;
      r6.w = r6.w * -2 + 3.14159274;
      r8.w = cmp(r2.x < -r2.x);
      r6.w = r8.w ? r6.w : 0;
      r3.w = r4.w * r3.w + r6.w;
      r3.w = 1.57079637 + -r3.w;
      r4.w = 1 + -abs(r1.x);
      r4.w = sqrt(r4.w);
      r6.w = abs(r1.x) * -0.0187292993 + 0.0742610022;
      r6.w = r6.w * abs(r1.x) + -0.212114394;
      r6.w = r6.w * abs(r1.x) + 1.57072878;
      r8.w = r6.w * r4.w;
      r8.w = r8.w * -2 + 3.14159274;
      r9.w = cmp(r1.x < -r1.x);
      r8.w = r9.w ? r8.w : 0;
      r4.w = r6.w * r4.w + r8.w;
      r4.w = 1.57079637 + -r4.w;
      r3.w = -r4.w + r3.w;
      r3.w = 0.5 * abs(r3.w);
      r3.w = cos(r3.w);
      r13.xyz = -r1.xxx * r6.xyz + r12.xyz;
      r16.xyz = -r2.xxx * r6.xyz + -r2.yzw;
      r4.w = dot(r13.xyz, r16.xyz);
      r6.w = dot(r13.xyz, r13.xyz);
      r8.w = dot(r16.xyz, r16.xyz);
      r6.w = r6.w * r8.w + 9.99999975e-005;
      r6.w = rsqrt(r6.w);
      r9.w = r6.w * r4.w;
      r10.w = saturate(r9.w * 0.5 + 0.5);
      r10.w = sqrt(r10.w);
      r11.w = 1 + -abs(r9.w);
      r11.w = sqrt(r11.w);
      r12.w = abs(r9.w) * -0.0187292993 + 0.0742610022;
      r12.w = r12.w * abs(r9.w) + -0.212114394;
      r12.w = r12.w * abs(r9.w) + 1.57072878;
      r13.x = r12.w * r11.w;
      r13.x = r13.x * -2 + 3.14159274;
      r13.y = cmp(r9.w < -r9.w);
      r13.x = r13.y ? r13.x : 0;
      r11.w = r12.w * r11.w + r13.x;
      r13.xy = float2(1.20000005,0.800000012) / r3.ww;
      r12.w = r3.w * 0.349999994 + r13.x;
      r0.z = r0.z * r0.z;
      r13.xzw = float3(0.5,1.25331414,5.01325655) * r0.zzz;
      r14.w = r0.z + r0.z;
      r15.w = -0.139543116 * r10.w;
      r16.w = -r2.x * r2.x + 1;
      r16.w = sqrt(r16.w);
      r17.x = 0.00978400372 * r2.x;
      r15.w = r15.w * r16.w + r17.x;
      r0.z = r0.z * r10.w;
      r17.xy = float2(1.41421354,3.54490781) * r0.zz;
      r0.z = r2.x + r1.x;
      r1.x = r0.z + -r15.w;
      r1.x = r1.x * r1.x;
      r1.x = -0.5 * r1.x;
      r2.x = r17.x * r17.x;
      r1.x = r1.x / r2.x;
      r1.x = 1.44269502 * r1.x;
      r1.x = exp2(r1.x);
      r1.x = r1.x / r17.y;
      r1.x = r1.x * r10.w;
      r0.y = saturate(r0.y * 0.5 + 0.5);
      r0.y = sqrt(r0.y);
      r0.y = 1 + -r0.y;
      r2.x = r0.y * r0.y;
      r2.x = r2.x * r2.x;
      r0.y = r2.x * r0.y;
      r0.y = r0.y * 0.953479409 + 0.0465205684;
      r0.y = r0.y * r1.x;
      r0.y = r0.y * r7.w;
      r17.xy = float2(-0.0350000001,-0.140000001) + r0.zz;
      r17.xy = r17.xy * r17.xy;
      r17.xy = float2(-0.5,-0.5) * r17.xy;
      r0.z = r13.x * r13.x;
      r0.z = r17.x / r0.z;
      r0.z = 1.44269502 * r0.z;
      r0.z = exp2(r0.z);
      r0.z = r0.z / r13.z;
      r1.x = 1 / r12.w;
      r2.x = r1.x * r1.x + 1;
      r1.x = r1.x + r1.x;
      r9.w = -r9.w * 0.5 + 0.5;
      r9.w = sqrt(r9.w);
      r1.x = -r1.x * r9.w + r2.x;
      r1.x = rsqrt(r1.x);
      r1.x = r10.w * r1.x;
      r2.x = r1.x / r12.w;
      r9.w = 1 + -abs(r2.x);
      r9.w = sqrt(r9.w);
      r10.w = abs(r2.x) * -0.0187292993 + 0.0742610022;
      r10.w = r10.w * abs(r2.x) + -0.212114394;
      r10.w = r10.w * abs(r2.x) + 1.57072878;
      r12.w = r10.w * r9.w;
      r12.w = r12.w * -2 + 3.14159274;
      r2.x = cmp(r2.x < -r2.x);
      r2.x = r2.x ? r12.w : 0;
      r2.x = r10.w * r9.w + r2.x;
      r2.x = 1.57079637 + -r2.x;
      r1.x = -r1.x * r1.x + 1;
      r1.x = max(0, r1.x);
      r1.x = sqrt(r1.x);
      r1.x = -r3.w * r1.x + 1;
      r9.w = r1.x * r1.x;
      r9.w = r9.w * r9.w;
      r1.x = r9.w * r1.x;
      r1.x = r1.x * 0.953479409 + 0.0465205684;
      r1.x = 1 + -r1.x;
      r1.x = r1.x * r1.x;
      r2.x = cos(r2.x);
      r2.x = 0.5 * r2.x;
      r2.x = r2.x / r3.w;
      r17.xzw = log2(r7.xyz);
      r18.xyz = r17.xzw * r2.xxx;
      r18.xyz = exp2(r18.xyz);
      r2.x = -3.14159274 + r11.w;
      r2.x = 4.80898333 * r2.x;
      r2.x = exp2(r2.x);
      r9.w = 1 + r2.x;
      r9.w = r9.w * r9.w;
      r9.w = 0.300000012 * r9.w;
      r2.x = r2.x / r9.w;
      r0.z = r2.x * r0.z;
      r0.z = r0.z * r1.x;
      r18.xyz = r0.zzz * r18.xyz;
      r18.xyz = r0.yyy * float3(0.5,0.5,0.5) + r18.xyz;
      r0.y = r14.w * r14.w;
      r0.y = r17.y / r0.y;
      r0.y = 1.44269502 * r0.y;
      r0.y = exp2(r0.y);
      r0.y = r0.y / r13.w;
      r0.z = -r3.w * 0.5 + 1;
      r1.x = r0.z * r0.z;
      r1.x = r1.x * r1.x;
      r0.z = r1.x * r0.z;
      r0.z = r0.z * 0.953479409 + 0.0465205684;
      r1.x = 1 + -r0.z;
      r1.x = r1.x * r1.x;
      r0.z = r1.x * r0.z;
      r13.xyz = r17.xzw * r13.yyy;
      r13.xyz = exp2(r13.xyz);
      r1.x = r4.w * r6.w + -1;
      r1.x = 7.50201416 * r1.x;
      r1.x = exp2(r1.x);
      r0.y = r1.x * r0.y;
      r0.y = r0.z * r0.y;
      r0.y = 0.827605724 * r0.y;
      r13.xyz = r0.yyy * r13.xyz + r18.xyz;
      r0.y = rsqrt(r8.w);
      r16.xyz = r16.xyz * r0.yyy;
      r0.y = dot(r16.xyz, r12.xyz);
      r0.y = 1 + r0.y;
      r0.y = saturate(0.25 * r0.y);
      r0.x = r0.x * r0.y;
      r0.x = 0.318309873 * r0.x;
      r0.y = dot(r7.xyz, float3(0.300000012,0.589999974,0.109999999));
      r16.xyz = r7.xyz / r0.yyy;
      r0.y = 1 + -r0.w;
      r16.xyz = log2(r16.xyz);
      r16.xyz = r16.xyz * r0.yyy;
      r16.xyz = exp2(r16.xyz);
      r7.xyz = sqrt(r7.xyz);
      r0.xyz = r7.xyz * r0.xxx;
      r14.xyz = r0.xyz * r16.xyz + r13.xyz;
      break;
      case 9 :      r0.xyz = r15.xyz * r1.www + -r2.yzw;
      r1.x = dot(r0.xyz, r0.xyz);
      r1.x = rsqrt(r1.x);
      r0.xyz = r1.xxx * r0.xyz;
      r0.x = saturate(dot(-r2.yzw, r0.xyz));
      r0.x = 1 + -r0.x;
      r0.y = r0.x * r0.x;
      r0.y = r0.y * r0.y;
      r0.z = r0.y * r0.x;
      r0.x = -r0.y * r0.x + 1;
      r0.x = r0.x * r7.w + r0.z;
      r0.yz = r5.xy * float2(2,2) + float2(-1,-1);
      r1.x = dot(float2(1,1), abs(r0.yz));
      r2.z = 1 + -r1.x;
      r1.x = cmp(r2.z < 0);
      r5.xy = float2(1,1) + -abs(r0.zy);
      r7.xy = cmp(r0.yz >= float2(0,0));
      r7.xy = r7.xy ? float2(1,1) : float2(-1,-1);
      r5.xy = r7.xy * r5.xy;
      r2.xy = r1.xx ? r5.xy : r0.yz;
      r0.y = dot(r2.xyz, r2.xyz);
      r0.y = rsqrt(r0.y);
      r2.xyz = r2.xyz * r0.yyy;
      r0.y = r5.z * r5.w;
      r1.xyw = -r3.xyz * r1.yyy + -r2.xyz;
      r1.xyw = r0.yyy * r1.xyw + r2.xyz;
      r0.y = dot(r1.xyw, r1.xyw);
      r0.y = rsqrt(r0.y);
      r1.xyw = r1.xyw * r0.yyy;
      r0.y = saturate(dot(r2.xyz, r12.xyz));
      r2.xy = r0.yy * float2(-11,-11) + float2(12,13);
      r0.z = 0.200000003 * r2.y;
      r1.x = saturate(dot(r1.xyw, r12.xyz));
      r1.x = log2(r1.x);
      r1.x = r2.x * r1.x;
      r1.x = exp2(r1.x);
      r0.z = r0.z * r1.x + 0.600000024;
      r1.x = dot(r6.xyz, r12.xyz);
      r1.x = 0.150000006 + r1.x;
      r1.x = saturate(0.756143689 * r1.x);
      r0.x = 1 + -r0.x;
      r0.y = r0.y * r0.z + -r1.x;
      r0.y = r5.z * r0.y + r1.x;
      r0.x = r0.x * r0.y;
      r0.xyz = r0.xxx * r4.xyz;
      r14.xyz = float3(0.318309873,0.318309873,0.318309873) * r0.xyz;
      break;
      default :
      r14.xyz = float3(0,0,0);
      break;
    }
    r0.xyz = r10.xyz * r0.www;
    r0.xyz = r14.xyz * r0.xyz;
    r0.xyz = r11.xyz * r8.xyz + r0.xyz;
    r0.w = t4.Sample(s1_s, v0.xy).x;
    r0.w = cmp(r0.w == 0.000000);
    if (r0.w != 0) {

// This is TranslatedWorldToClip, but it is only using three components which
// is slightly throwing out any adjustments we add after it:
      r1.xyw = cb0[1].xyw * r9.yyy;
      r1.xyw = r9.xxx * cb0[0].xyw + r1.xyw;
      r1.xyw = r9.zzz * cb0[2].xyw + r1.xyw;
      r1.xyw = cb0[3].xyw + r1.xyw;
      r2.xy = r1.xy / r1.ww;

      r0.w = dot(r9.xyz, r9.xyz);
      r0.w = sqrt(r0.w);
      r0.w = saturate(cb2[10].z * r0.w);
      r0.w = log2(r0.w);
      r0.w = cb2[11].x * r0.w;
      r2.z = exp2(r0.w);
      r1.xyw = r2.xyz * float3(0.5,-0.5,1) + float3(0.5,0.5,0);
      r1.xyw = r1.xyw * cb2[15].xyz + cb2[14].xyz;
      r2.xyzw = t3.SampleLevel(s0_s, r1.xyw, 0).xyzw;
      r0.w = 1 + -r2.w;
      r0.w = -cb2[21].x + r0.w;
      r0.w = saturate(cb2[21].y * r0.w);
      r0.w = log2(r0.w);
      r0.w = cb2[21].z * r0.w;
      r0.w = exp2(r0.w);
      r1.xyw = r2.xyz * cb2[21].www + float3(-1,-1,-1);
      r1.xyw = r0.www * r1.xyw + float3(1,1,1);
      o0.xyz = r1.xyw * r0.xyz;
      o0.w = 0;
    } else {
      r0.w = v1.z * r1.z + cb0[53].z;
      r0.w = -cb2[15].w + r0.w;
      r1.x = saturate(cb2[16].x * r0.w);
      r1.y = 0;
      r2.xyz = t0.SampleLevel(s0_s, r1.xy, 0).xyz;
      r3.xyz = cb2[23].xyz + -r2.xyz;
      r2.xyz = cb2[22].xxx * r3.xyz + r2.xyz;
      r3.xyz = t1.SampleLevel(s0_s, r1.xy, 0).yzw;
      r4.xyz = cb2[24].yzw + -r3.xyz;
      r3.xyz = cb2[22].yyy * r4.xyz + r3.xyz;
      r3.xz = float2(1,1) / r3.xz;
      r4.xyzw = t2.SampleLevel(s0_s, r1.xy, 0).xyzw;
      r5.xyzw = cb2[25].xyzw + -r4.xyzw;
      r4.xyzw = cb2[22].yyyy * r5.xyzw + r4.xyzw;
      r0.w = saturate(r3.x * r1.z);
      r0.w = log2(r0.w);
      r0.w = r4.x * r0.w;
      r0.w = exp2(r0.w);
      r1.x = -r3.y + r1.z;
      r1.x = saturate(r1.x * r3.z);
      r1.x = log2(r1.x);
      r1.x = r4.y * r1.x;
      r1.x = exp2(r1.x);
      r1.x = r1.x * r4.w;
      r0.w = saturate(r0.w * r4.z + r1.x);
      r0.w = -cb2[21].x + r0.w;
      r0.w = saturate(cb2[21].y * r0.w);
      r0.w = log2(r0.w);
      r0.w = cb2[21].z * r0.w;
      r0.w = exp2(r0.w);
      r1.xyz = r2.xyz * cb2[21].www + float3(-1,-1,-1);
      r1.xyz = r0.www * r1.xyz + float3(1,1,1);
      o0.xyz = r1.xyz * r0.xyz;
      o0.w = 0;
    }
  } else {
    o0.xyzw = float4(0,0,0,0);
  }
  return;
}
