// Lighting near cave entrance
// VS 3c39886e9905c001
// PS 7faa78122c72cb85 b8c7724aad81f2e3

// Type: TDeferredLightPSfalsetruefalsefalsetruetruefalse
// Skipping over variable length shader specific section (244 bytes):
//   000c8530: 00000000 00000000 00000000 00000000 | ................ |
//   000c8540: 00000000 04000100 04000100 00000000 | ................ |
//   000c8550: 00000000 00000000 00000000 03000100 | ................ |
//   000c8560: 00000000 00000000 00000000 00000000 | ................ |
//   000c8570: 00000000 00000000 00000000 00000000 | ................ |
//   000c8580: 00000000 00000000 00000000 00000000 | ................ |
//   000c8590: 00000000 00000000 00000000 00000600 | ................ |
//   000c85a0: 01000600 01000000 00000000 00000000 | ................ |
//   000c85b0: 00000500 01000500 01000000 00000000 | ................ |
//   000c85c0: 00000000 00000000 00000700 01000000 | ................ |
//   000c85d0: 00004824 6DE4C519 8BC57449 F6ACCE91 | ..H$m.....tI.... |
//   000c85e0: F95BFBCE 0C4D9FF0 F6BACFE0 D9C0AC9A | .[...M.......... |
//   000c85f0: FAAB2F4D BE1DE551 D0430500 00004E6F | ../M...Q.C....No |
//   000c8600: 6E650005 0000004E 6F6E6500 00000000 | ne.....None..... |
//   000c8610: 00000000 00000000 00000000 00000000 | ................ |
//   000c8620: 31000000                            | 1...             |
// SourceHash: 3acea255fc4008ef2c4a7847e6bf52fa98a969b7
// TargetFrequency: 3, TargetPlatform: 0
// NumUniformParameters: 4
//   StructName: FFrameUniformShaderParameters
//    BaseIndex: 1, bIsBound: 1
//   StructName: FViewUniformShaderParameters
//    BaseIndex: 0, bIsBound: 1
//   StructName: FGBufferResourceStruct
//    BaseIndex: 3, bIsBound: 1
//   StructName: FDeferredLightUniformStruct
//    BaseIndex: 2, bIsBound: 1
// ShaderTypeName: None
// ResourceTableBits: 00000008
// ShaderResourceViewMap: 00000000 00000000 00000000 00000004 03000000 03000101 03000202 03000303 ffffffff
// SamplerMap: 00000000 00000000 00000000 00000004 03001200 03001301 03001402 03001503 ffffffff
// UnorderedAccessViewMap: 00000000 00000000 00000000 00000000 ffffffff
// ResourceTableLayoutHashes: 00000000 00000000 00000000 01010000
// Unknown Tail (124 bytes):
//   00000000: 70050007 08030075 42050000 00050000 | p......uB....... |
//   00000010: 00566965 77000600 00004672 616D6500 | .View.....Frame. |
//   00000020: 16000000 44656665 72726564 4C696768 | ....DeferredLigh |
//   00000030: 74556E69 666F726D 73000900 00004742 | tUniforms.....GB |
//   00000040: 75666665 72730000 0000006E 2E446566 | uffers.....n.Def |
//   00000050: 65727265 644C6967 68745069 78656C53 | erredLightPixelS |
//   00000060: 68616465 72732E75 73667C52 61646961 | haders.usf|Radia |
//   00000070: 6C506978 656C4D61 696E0000          | lPixelMain..     |
// OutputHash: 48246de4c5198bc57449f6acce91f95bfbce0c4d
// NumInstructions: 491
// NumTextureSamplers: 7
//
// Headers extracted with DarkStarSword's extract_unreal_shaders.py
// https://github.com/DarkStarSword/3d-fixes



// ---- Created with 3Dmigoto v1.2.42 on Sat Oct 01 18:32:02 2016
Texture2D<uint4> t7 : register(t7);

Texture2D<float4> t6 : register(t6);

Texture2D<float4> t5 : register(t5);

Texture2D<float4> t4 : register(t4);

Texture2D<float4> t3 : register(t3);

Texture2D<float4> t2 : register(t2);

Texture2D<float4> t1 : register(t1);

Texture2D<float4> t0 : register(t0);

SamplerState s6_s : register(s6);

SamplerState s5_s : register(s5);

SamplerState s4_s : register(s4);

SamplerState s3_s : register(s3);

SamplerState s2_s : register(s2);

SamplerState s1_s : register(s1);

SamplerState s0_s : register(s0);

cbuffer cb2 : register(b2)
{
  float4 cb2[7];
}

cbuffer cb1 : register(b1)
{
  float4 cb1[33];
}

cbuffer cb0 : register(b0)
{
  float4 cb0[54];
}




// 3Dmigoto declarations
#define cmp -
Texture1D<float4> IniParams : register(t120);
Texture2D<float4> StereoParams : register(t125);

#include "matrix.hlsl"

void main( 
  float4 v0 : TEXCOORD0,
  float4 v1 : SV_POSITION0,
  out float4 o0 : SV_Target0)
{
  float4 r0,r1,r2,r3,r4,r5,r6,r7,r8,r9,r10,r11,r12,r13;
  uint4 bitmask, uiDest;
  float4 fDest;

  r0.xy = v0.xy / v0.ww;
  r0.zw = r0.xy * cb0[52].xy + cb0[52].wz;
  r1.xyzw = t1.SampleLevel(s1_s, r0.zw, 0).xzyw;
  r2.xy = cb1[3].xy * r0.zw;
  r2.xy = (uint2)r2.xy;
  r1.w = 255 * r1.w;
  r1.w = round(r1.w);
  r1.w = (uint)r1.w;
  r3.x = (int)r1.w & 15;
  r3.y = cmp(0 < (uint)r3.x);
  r2.zw = float2(0,0);
  r2.z = t7.Load(r2.xyz).x;
  r2.z = (int)r2.z & asint(cb2[6].y);
  r2.z = cmp((int)r2.z != 0);
  r2.z = r2.z ? r3.y : 0;
  if (r2.z != 0) {
    r3.yzw = t0.SampleLevel(s0_s, r0.zw, 0).xyz;
    r3.yzw = r3.yzw * float3(2,2,2) + float3(-1,-1,-1);
    r2.z = dot(r3.yzw, r3.yzw);
    r2.z = rsqrt(r2.z);
    r3.yzw = r3.yzw * r2.zzz;
    r2.z = t4.SampleLevel(s4_s, r0.zw, 0).x;
    r2.z = r2.z * cb0[51].z + -cb0[51].w;
    r2.z = 1 / r2.z;
    r0.xy = r2.zz * r0.xy;

// Fix light shading:
float4 s = StereoParams.Load(0);
r0.x -= s.x * (r2.z - s.y);

    r4.xyzw = cb0[41].xyzw * r0.yyyy;
    r4.xyzw = r0.xxxx * cb0[40].xyzw + r4.xyzw;
    r4.xyzw = r2.zzzz * cb0[42].xyzw + r4.xyzw;
    r4.xyzw = cb0[43].xyzw + r4.xyzw;
    r4.xyz = r4.xyz / r4.www;
    r5.xyz = -cb0[53].xyz + r4.xyz;

// Specular:
r5.xyz -= mul(float4(s.x * s.y, 0, 0, 0), MATRIX(cb0, 40)).xyz;

    r0.x = dot(r5.xyz, r5.xyz);
    r0.x = rsqrt(r0.x);
    r5.xyz = r5.xyz * r0.xxx;
    r0.x = t5.SampleLevel(s5_s, r0.zw, 0).z;
    r0.x = r0.x * r0.x;
    r4.xyz = cb2[0].xyz + -r4.xyz;
    r0.y = dot(r4.xyz, r4.xyz);
    r0.y = rsqrt(r0.y);
    r6.xyz = r4.xyz * r0.yyy;
    r2.z = saturate(dot(r3.yzw, r6.xyz));
    r7.xyz = cb2[0].www * r4.xyz;
    r2.w = dot(r7.xyz, r7.xyz);
    r2.w = min(1, r2.w);
    r2.w = 1 + -r2.w;
    r2.w = log2(r2.w);
    r2.w = cb2[1].w * r2.w;
    r2.w = exp2(r2.w);
    r4.w = dot(r6.xyz, cb2[2].xyz);
    r4.w = -cb2[3].x + r4.w;
    r4.w = saturate(cb2[3].y * r4.w);
    r4.w = r4.w * r4.w;
    r5.w = cmp(0 < r2.w);
    r6.x = cmp(0 < r4.w);
    r5.w = r5.w ? r6.x : 0;
    if (r5.w != 0) {
      r6.xyz = t2.SampleLevel(s2_s, r0.zw, 0).xyz;
      r7.xyzw = t3.SampleLevel(s3_s, r0.zw, 0).xyzw;
      r5.w = (uint)cb1[32].x;
      r2.x = (int)r2.x + (int)r2.y;
      r2.x = (int)r2.x + (int)r5.w;
      r2.x = (int)r2.x & 1;
      r2.y = (int)r1.w & 16;
      r7.xyzw = r2.yyyy ? float4(0,0,0,0) : r7.xyzw;
      r2.y = cmp((int)r3.x == 5);
      r8.xyzw = r2.xxxx ? float4(1,1,1,0) : float4(0,0,0,1);
      r6.w = r1.z;
      r6.xyzw = r2.yyyy ? r8.xyzw : r6.xyzw;
      r8.xyz = -r6.xyz * r1.xxx + r6.xyz;
      r2.x = 0.0799999982 * r6.w;
      r6.xyz = -r6.www * float3(0.0799999982,0.0799999982,0.0799999982) + r6.xyz;
      r6.xyz = r1.xxx * r6.xyz + r2.xxx;
      r8.xyz = r8.xyz * cb1[5].www + cb1[5].xyz;
      r6.xyz = r6.xyz * cb1[6].www + cb1[6].xyz;
      if (cb2[6].x != 0) {
        r2.xy = (int2)r1.ww & int2(32,64);
        r1.w = r2.y ? 0 : 1;
        r1.w = r2.x ? r1.w : 1;
        r2.x = dot(cb2[5].xyzw, float4(1,1,1,1));
        r1.w = dot(r1.wwww, cb2[5].xyzw);
        r1.w = -1 + r1.w;
        r1.w = r2.x * r1.w + 1;
        r0.x = r1.w * r0.x;
      } else {
        r0.x = t6.SampleLevel(s6_s, r0.zw, 0).x;
      }
      r0.z = r4.w * r2.w;
      r0.x = r0.z * r0.x;
      r1.x = r7.y;
      r1.z = 1;
      r1.xyz = max(cb2[4].xxx, r1.xyz);
      r2.xyw = r1.xyz * r1.xyz;
      r0.z = dot(r5.xyz, r3.yzw);
      r0.z = r0.z + r0.z;
      r9.xyz = r3.yzw * -r0.zzz + r5.xyz;
      r0.zw = cmp(float2(0,0) < cb2[3].wz);
      if (r0.z != 0) {
        r0.z = cb2[3].w * r0.y;
        r0.z = min(1, r0.z);
        r10.xyz = r0.zzz * float3(0.5,0.5,0.5) + r2.xyw;
        r10.xyz = min(float3(1,1,1), r10.xyz);
        r10.xyz = r2.xyw / r10.xyz;
        r11.xyz = cb2[3].www * cb2[2].xyz;
        r12.xyz = -r11.xyz * float3(0.5,0.5,0.5) + r4.xyz;
        r0.z = dot(r9.xyz, r11.xyz);
        r13.xyz = r0.zzz * r9.xyz + -r11.xyz;
        r1.z = dot(r12.xyz, r13.xyz);
        r0.z = r0.z * r0.z;
        r0.z = cb2[3].w * cb2[3].w + -r0.z;
        r0.z = saturate(r1.z / r0.z);
        r4.xyz = r0.zzz * r11.xyz + r12.xyz;
      } else {
        r10.xyz = float3(1,1,1);
      }
      if (r0.w != 0) {
        r0.y = cb2[3].z * r0.y;
        r0.y = min(1, r0.y);
        r0.yzw = r0.yyy * float3(0.5,0.5,0.5) + r2.xyw;
        r0.yzw = min(float3(1,1,1), r0.yzw);
        r0.yzw = r2.xyw / r0.yzw;
        r0.yzw = r0.yzw * r0.yzw;
        r10.xyz = r10.xyz * r0.yzw;
        r0.y = dot(r4.xyz, r9.xyz);
        r0.yzw = r0.yyy * r9.xyz + -r4.xyz;
        r1.z = dot(r0.yzw, r0.yzw);
        r1.z = rsqrt(r1.z);
        r1.z = cb2[3].z * r1.z;
        r1.z = min(1, r1.z);
        r4.xyz = r0.yzw * r1.zzz + r4.xyz;
      }
      r0.y = dot(r4.xyz, r4.xyz);
      r0.y = rsqrt(r0.y);
      r2.xyw = r4.xyz * r0.yyy;
      switch (r3.x) {
        case 1 :        case 2 :        case 3 :        case 5 :        case 6 :        r11.xyz = r10.zzz * r8.xyz;
        r9.xyz = float3(0.318309873,0.318309873,0.318309873) * r11.xyz;
        break;
        case 4 :        r11.xyz = r4.xyz * r0.yyy + -r5.xyz;
        r0.z = dot(r11.xyz, r11.xyz);
        r0.z = rsqrt(r0.z);
        r11.xyz = r11.xyz * r0.zzz;
        r0.z = saturate(dot(r3.yzw, r2.xyw));
        r0.w = dot(r3.yzw, -r5.xyz);
        r0.w = max(9.99999975e-006, r0.w);
        r1.z = saturate(dot(r3.yzw, r11.xyz));
        r1.w = saturate(dot(-r5.xyz, r11.xyz));
        r11.xy = r1.xy * r1.xy;
        r11.xz = r11.xy * r11.xy;
        r12.xy = r1.zz * r11.xz + -r1.zz;
        r12.xy = r12.xy * r1.zz + float2(1,1);
        r12.xy = r12.xy * r12.xy;
        r12.xy = float2(3.14159274,3.14159274) * r12.xy;
        r11.xz = r11.xz / r12.xy;
        r1.z = r11.x * r10.x;
        r4.w = r1.w * r1.w;
        r4.w = r4.w * 4 + 9.99999975e-006;
        r4.w = rcp(r4.w);
        r1.w = 1 + -r1.w;
        r5.w = r1.w * r1.w;
        r5.w = r5.w * r5.w;
        r6.w = r5.w * r1.w;
        r1.w = -r5.w * r1.w + 1;
        r5.w = r1.w * 0.0399999991 + r6.w;
        r8.w = r5.w * r7.x;
        r1.z = r4.w * r1.z;
        r4.w = -r5.w * r7.x + 1;
        r5.w = r11.z * r10.y;
        r9.w = 0.5 * r11.y;
        r10.w = -r11.y * 0.5 + 1;
        r0.w = r0.w * r10.w + r9.w;
        r0.z = r0.z * r10.w + r9.w;
        r0.z = r0.w * r0.z;
        r0.z = 0.25 / r0.z;
        r0.w = saturate(50 * r6.y);
        r11.xyz = r1.www * r6.xyz;
        r11.xyz = r0.www * r6.www + r11.xyz;
        r12.xyz = r10.zzz * r8.xyz;
        r0.z = r5.w * r0.z;
        r11.xyz = r0.zzz * r11.xyz;
        r11.xyz = r12.xyz * float3(0.318309873,0.318309873,0.318309873) + r11.xyz;
        r11.xyz = r11.xyz * r4.www;
        r9.xyz = r1.zzz * r8.www + r11.xyz;
        break;
        case 8 :        r11.xyzw = saturate(r7.xyzw);
        r12.xyz = r4.xyz * r0.yyy + -r5.xyz;
        r0.z = dot(r12.xyz, r12.xyz);
        r0.z = rsqrt(r0.z);
        r12.xyz = r12.xyz * r0.zzz;
        r0.z = saturate(dot(r3.yzw, r2.xyw));
        r0.w = dot(r3.yzw, -r5.xyz);
        r0.w = max(9.99999975e-006, r0.w);
        r1.z = saturate(dot(r3.yzw, r12.xyz));
        r1.w = saturate(dot(-r5.xyz, r12.xyz));
        r12.xyz = r10.zzz * r8.xyz;
        r1.w = 1 + -r1.w;
        r4.w = r1.w * r1.w;
        r4.w = r4.w * r4.w;
        r5.w = r4.w * r1.w;
        r6.w = 50 * r11.y;
        r6.w = min(1, r6.w);
        r1.w = -r4.w * r1.w + 1;
        r11.xyz = r1.www * r11.xyz;
        r11.xyz = r6.www * r5.www + r11.xyz;
        r4.w = r1.y * r1.y;
        r6.w = r4.w * r4.w;
        r8.w = -r6.w * r1.z + r1.z;
        r8.w = r8.w * r1.z + r6.w;
        r9.w = 4 * r6.w;
        r10.w = r6.w * 4 + 1;
        r10.w = 3.14159274 * r10.w;
        r10.w = rcp(r10.w);
        r9.w = r9.w * r6.w;
        r8.w = r8.w * r8.w;
        r8.w = r9.w / r8.w;
        r8.w = 1 + r8.w;
        r8.w = r10.w * r8.w;
        r9.w = r0.z + r0.w;
        r9.w = -r0.z * r0.w + r9.w;
        r9.w = 4 * r9.w;
        r9.w = rcp(r9.w);
        r8.w = r9.w * r8.w;
        r9.w = saturate(50 * r6.y);
        r13.xyz = r1.www * r6.xyz;
        r13.xyz = r9.www * r5.www + r13.xyz;
        r1.w = r6.w * r1.z + -r1.z;
        r1.z = r1.w * r1.z + 1;
        r1.z = r1.z * r1.z;
        r1.z = 3.14159274 * r1.z;
        r1.z = r6.w / r1.z;
        r1.z = r1.z * r10.y;
        r1.w = -r1.y * r1.y + 1;
        r5.w = r0.w * r1.w + r4.w;
        r1.w = r0.z * r1.w + r4.w;
        r0.w = r1.w * r0.w;
        r0.z = r0.z * r5.w + r0.w;
        r0.z = rcp(r0.z);
        r0.z = r1.z * r0.z;
        r0.z = 0.5 * r0.z;
        r13.xyz = r0.zzz * r13.xyz;
        r11.xyz = r8.www * r11.xyz + -r13.xyz;
        r11.xyz = r11.www * r11.xyz + r13.xyz;
        r9.xyz = r12.xyz * float3(0.318309873,0.318309873,0.318309873) + r11.xyz;
        break;
        case 9 :        r11.xyz = r4.xyz * r0.yyy + -r5.xyz;
        r0.z = dot(r11.xyz, r11.xyz);
        r0.z = rsqrt(r0.z);
        r11.xyz = r11.xyz * r0.zzz;
        r0.z = saturate(dot(r3.yzw, r2.xyw));
        r0.w = dot(r3.yzw, -r5.xyz);
        r0.w = max(9.99999975e-006, r0.w);
        r1.z = saturate(dot(r3.yzw, r11.xyz));
        r1.w = saturate(dot(-r5.xyz, r11.xyz));
        r4.w = r1.y * r1.y;
        r5.w = r4.w * r4.w;
        r6.w = r1.z * r5.w + -r1.z;
        r1.z = r6.w * r1.z + 1;
        r1.z = r1.z * r1.z;
        r1.z = 3.14159274 * r1.z;
        r1.z = r5.w / r1.z;
        r1.z = r1.z * r10.y;
        r5.w = -r1.y * r1.y + 1;
        r6.w = r0.w * r5.w + r4.w;
        r4.w = r0.z * r5.w + r4.w;
        r0.w = r4.w * r0.w;
        r0.z = r0.z * r6.w + r0.w;
        r0.z = rcp(r0.z);
        r0.z = r1.z * r0.z;
        r0.w = 1 + -r1.w;
        r1.z = r0.w * r0.w;
        r1.z = r1.z * r1.z;
        r1.w = r1.z * r0.w;
        r4.w = saturate(50 * r6.y);
        r0.w = -r1.z * r0.w + 1;
        r11.xyz = r0.www * r6.xyz;
        r11.xyz = r4.www * r1.www + r11.xyz;
        r0.z = 0.5 * r0.z;
        r9.xyz = r0.zzz * r11.xyz;
        break;
        default :
        r9.xyz = float3(0,0,0);
        break;
      }
      switch (r3.x) {
        case 1 :        case 2 :        case 3 :        case 5 :        case 6 :        r12.xyz = r4.xyz * r0.yyy + -r5.xyz;
        r0.z = dot(r12.xyz, r12.xyz);
        r0.z = rsqrt(r0.z);
        r12.xyz = r12.xyz * r0.zzz;
        r0.z = saturate(dot(r3.yzw, r2.xyw));
        r0.w = dot(r3.yzw, -r5.xyz);
        r0.w = max(9.99999975e-006, r0.w);
        r1.z = saturate(dot(r3.yzw, r12.xyz));
        r1.w = saturate(dot(-r5.xyz, r12.xyz));
        r3.x = r1.y * r1.y;
        r4.w = r3.x * r3.x;
        r5.w = r1.z * r4.w + -r1.z;
        r1.z = r5.w * r1.z + 1;
        r1.z = r1.z * r1.z;
        r1.z = 3.14159274 * r1.z;
        r1.z = r4.w / r1.z;
        r1.z = r1.z * r10.y;
        r4.w = -r1.y * r1.y + 1;
        r5.w = r0.w * r4.w + r3.x;
        r3.x = r0.z * r4.w + r3.x;
        r0.w = r3.x * r0.w;
        r0.z = r0.z * r5.w + r0.w;
        r0.z = rcp(r0.z);
        r0.z = r1.z * r0.z;
        r0.w = 1 + -r1.w;
        r1.z = r0.w * r0.w;
        r1.z = r1.z * r1.z;
        r1.w = r1.z * r0.w;
        r3.x = saturate(50 * r6.y);
        r0.w = -r1.z * r0.w + 1;
        r12.xyz = r0.www * r6.xyz;
        r12.xyz = r3.xxx * r1.www + r12.xyz;
        r0.z = 0.5 * r0.z;
        r11.xyz = r0.zzz * r12.xyz;
        break;
        case 4 :        r12.xyz = r4.xyz * r0.yyy + -r5.xyz;
        r0.z = dot(r12.xyz, r12.xyz);
        r0.z = rsqrt(r0.z);
        r12.xyz = r12.xyz * r0.zzz;
        r0.z = saturate(dot(r3.yzw, r2.xyw));
        r0.w = dot(r3.yzw, -r5.xyz);
        r0.w = max(9.99999975e-006, r0.w);
        r1.z = saturate(dot(r3.yzw, r12.xyz));
        r1.w = saturate(dot(-r5.xyz, r12.xyz));
        r12.xy = r1.xy * r1.xy;
        r12.xz = r12.xy * r12.xy;
        r13.xy = r1.zz * r12.xz + -r1.zz;
        r1.xz = r13.xy * r1.zz + float2(1,1);
        r1.xz = r1.xz * r1.xz;
        r1.xz = float2(3.14159274,3.14159274) * r1.xz;
        r1.xz = r12.xz / r1.xz;
        r1.xz = r1.xz * r10.xy;
        r3.x = r1.w * r1.w;
        r3.x = r3.x * 4 + 9.99999975e-006;
        r3.x = rcp(r3.x);
        r1.w = 1 + -r1.w;
        r4.w = r1.w * r1.w;
        r4.w = r4.w * r4.w;
        r5.w = r4.w * r1.w;
        r1.w = -r4.w * r1.w + 1;
        r4.w = r1.w * 0.0399999991 + r5.w;
        r6.w = r4.w * r7.x;
        r1.x = r3.x * r1.x;
        r3.x = -r4.w * r7.x + 1;
        r4.w = 0.5 * r12.y;
        r8.w = -r12.y * 0.5 + 1;
        r0.w = r0.w * r8.w + r4.w;
        r0.z = r0.z * r8.w + r4.w;
        r0.z = r0.w * r0.z;
        r0.z = 0.25 / r0.z;
        r0.w = saturate(50 * r6.y);
        r12.xyz = r1.www * r6.xyz;
        r12.xyz = r0.www * r5.www + r12.xyz;
        r13.xyz = r10.zzz * r8.xyz;
        r0.z = r1.z * r0.z;
        r12.xyz = r0.zzz * r12.xyz;
        r12.xyz = r13.xyz * float3(0.318309873,0.318309873,0.318309873) + r12.xyz;
        r12.xyz = r12.xyz * r3.xxx;
        r11.xyz = r1.xxx * r6.www + r12.xyz;
        break;
        case 8 :        r7.xyzw = saturate(r7.xyzw);
        r1.xzw = r4.xyz * r0.yyy + -r5.xyz;
        r0.z = dot(r1.xzw, r1.xzw);
        r0.z = rsqrt(r0.z);
        r1.xzw = r1.xzw * r0.zzz;
        r0.z = saturate(dot(r3.yzw, r2.xyw));
        r0.w = dot(r3.yzw, -r5.xyz);
        r0.w = max(9.99999975e-006, r0.w);
        r3.x = saturate(dot(r3.yzw, r1.xzw));
        r1.x = saturate(dot(-r5.xyz, r1.xzw));
        r8.xyz = r10.zzz * r8.xyz;
        r1.x = 1 + -r1.x;
        r1.z = r1.x * r1.x;
        r1.z = r1.z * r1.z;
        r1.w = r1.z * r1.x;
        r4.w = 50 * r7.y;
        r4.w = min(1, r4.w);
        r1.x = -r1.z * r1.x + 1;
        r7.xyz = r1.xxx * r7.xyz;
        r7.xyz = r4.www * r1.www + r7.xyz;
        r1.z = r1.y * r1.y;
        r4.w = r1.z * r1.z;
        r5.w = -r4.w * r3.x + r3.x;
        r5.w = r5.w * r3.x + r4.w;
        r6.w = 4 * r4.w;
        r8.w = r4.w * 4 + 1;
        r8.w = 3.14159274 * r8.w;
        r8.w = rcp(r8.w);
        r6.w = r6.w * r4.w;
        r5.w = r5.w * r5.w;
        r5.w = r6.w / r5.w;
        r5.w = 1 + r5.w;
        r5.w = r8.w * r5.w;
        r6.w = r0.z + r0.w;
        r6.w = -r0.z * r0.w + r6.w;
        r6.w = 4 * r6.w;
        r6.w = rcp(r6.w);
        r5.w = r6.w * r5.w;
        r6.w = saturate(50 * r6.y);
        r10.xzw = r1.xxx * r6.xyz;
        r10.xzw = r6.www * r1.www + r10.xzw;
        r1.x = r4.w * r3.x + -r3.x;
        r1.x = r1.x * r3.x + 1;
        r1.x = r1.x * r1.x;
        r1.x = 3.14159274 * r1.x;
        r1.x = r4.w / r1.x;
        r1.x = r1.x * r10.y;
        r1.w = -r1.y * r1.y + 1;
        r3.x = r0.w * r1.w + r1.z;
        r1.z = r0.z * r1.w + r1.z;
        r0.w = r1.z * r0.w;
        r0.z = r0.z * r3.x + r0.w;
        r0.z = rcp(r0.z);
        r0.z = r1.x * r0.z;
        r0.z = 0.5 * r0.z;
        r1.xzw = r0.zzz * r10.xzw;
        r7.xyz = r5.www * r7.xyz + -r1.xzw;
        r1.xzw = r7.www * r7.xyz + r1.xzw;
        r11.xyz = r8.xyz * float3(0.318309873,0.318309873,0.318309873) + r1.xzw;
        break;
        case 9 :        r0.yzw = r4.xyz * r0.yyy + -r5.xyz;
        r1.x = dot(r0.yzw, r0.yzw);
        r1.x = rsqrt(r1.x);
        r0.yzw = r1.xxx * r0.yzw;
        r1.x = saturate(dot(r3.yzw, r2.xyw));
        r1.z = dot(r3.yzw, -r5.xyz);
        r1.z = max(9.99999975e-006, r1.z);
        r1.w = saturate(dot(r3.yzw, r0.yzw));
        r0.y = saturate(dot(-r5.xyz, r0.yzw));
        r0.z = r1.y * r1.y;
        r0.w = r0.z * r0.z;
        r2.x = r1.w * r0.w + -r1.w;
        r1.w = r2.x * r1.w + 1;
        r1.w = r1.w * r1.w;
        r1.w = 3.14159274 * r1.w;
        r0.w = r0.w / r1.w;
        r0.w = r0.w * r10.y;
        r1.y = -r1.y * r1.y + 1;
        r1.w = r1.z * r1.y + r0.z;
        r0.z = r1.x * r1.y + r0.z;
        r0.z = r1.z * r0.z;
        r0.z = r1.x * r1.w + r0.z;
        r0.z = rcp(r0.z);
        r0.z = r0.w * r0.z;
        r0.y = 1 + -r0.y;
        r0.w = r0.y * r0.y;
        r0.w = r0.w * r0.w;
        r1.x = r0.w * r0.y;
        r1.y = saturate(50 * r6.y);
        r0.y = -r0.w * r0.y + 1;
        r2.xyw = r0.yyy * r6.xyz;
        r1.xyz = r1.yyy * r1.xxx + r2.xyw;
        r0.y = 0.5 * r0.z;
        r11.xyz = r0.yyy * r1.xyz;
        break;
        default :
        r11.xyz = float3(0,0,0);
        break;
      }
      r0.x = r2.z * r0.x;
      r0.xyz = cb2[1].xyz * r0.xxx;
      r1.xyz = r11.xyz + r9.xyz;
      r0.xyz = r1.xyz * r0.xyz;
    } else {
      r0.xyz = float3(0,0,0);
    }
    o0.xyz = r0.xyz;
    o0.w = 0;
  } else {
    o0.xyzw = float4(0,0,0,0);
  }
  return;
}
