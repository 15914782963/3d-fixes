[General]

; UseRenderedShaders=true is nearly always useful, because it trims the
; list of shaders seen while hunting down to just those active in the
; current scene.  Disable this only if you get crashes during hunting.
UseRenderedShaders=true

; DumpAll will generate ASM text files for every shader seen by the game.
; This is usually worth doing once, but not useful for every run.
DumpAll=true

; Constant registers that will arrive in Vertex and Pixel Shaders, as
; c200.  The constants below will be assigned, based on the key preset.
DefVSConst1 = 200
DefPSConst1 = 200

; The PresetKeysList specifies which KEYs will be used.
; Multiple keys lists are supported.
; Note that the KEY sections are in hexadecimal
PresetsKeysList = 0;1;2;3;4;5;6;7;8;9;A;B;C;D;E;

; Allows textures to be cycled with Up/Down - use to hunt menu text CRC32
; bCalcTexCRCatStart = true

; v1.1.3 update added exclusive full screen mode, so this profile selection is
; no longer necessary:
; GameProfile = fxdplayer

; Mouse stopped working in game with Helix mod (works in menus)
InitMouse = false

; Makes it crash less when reloading shaders:
OverrideMethod = 2

; Allow access to the screen size in pixel shaders for shadow fix:
DefPSViewSizeConst = 210
; Use to calculate appropriate threshold for full-screen coordinate detection:
DefVSViewSizeConst = 210

; Force square surfaces (shadow maps) to be mono:
DefSquareSurfaceMode = 2

; DefDepthStencilSurfaceMode = 1
; DefSurfaceCreationMode = 1
; DefRtCreationMode = 1

SurfaceCreationModeList = 0;1;

; Stereoise LightShaft _DepthEpi render target (didn't seem to work)
[SF0]
DefMode = 1
Format = 115
; Width = 1024
; Height = 1024
; Usage = 1
; Pool = 0
; Levels = 1

; Stereoise LightShaft _CoordEpi render target (didn't seem to work)
[SF1]
DefMode = 1
Format = 115
; Width = 1024
; Height = 1024
; Usage = 1
; Pool = 0
; Levels = 1



; Number row on keyboard sets UI depth to various values between screen depth
; and separation. `~ (left of 1 on US keyboards) sets screen depth, 1-9 sets
; septh in 10% multiples and 0 sets depth to 100% separation.
; Note that the KEY%X on these sections is in hexadecimal, hence we use KEYA
; for the tenth key entry and so on.
[KEY0]
Key = 192
Presets = 0;
Type = 1
[PRES0]
Const3 = 0x00000000
[KEY1]
Key = 49
Presets = 1;
Type = 1
[PRES1]
Const3 = 0x3dcccccd
[KEY2]
Key = 50
Presets = 2;
Type = 1
[PRES2]
Const3 = 0x3e4ccccd
[KEY3]
Key = 51
Presets = 3;
Type = 1
[PRES3]
Const3 = 0x3e99999a
[KEY4]
Key = 52
Presets = 4;
Type = 1
[PRES4]
Const3 = 0x3ecccccd
[KEY5]
Key = 53
Presets = 5;
Type = 1
[PRES5]
Const3 = 0x3f000000
[KEY6]
Key = 54
Presets = 6;
Type = 1
[PRES6]
Const3 = 0x3f19999a
[KEY7]
Key = 55
Presets = 7;
Type = 1
[PRES7]
Const3 = 0x3f333333
[KEY8]
Key = 56
Presets = 8;
Type = 1
[PRES8]
Const3 = 0x3f4ccccd
[KEY9]
Key = 57
Presets = 9;
Type = 1
[PRES9]
Const3 = 0x3f666666
[KEYA]
Key = 48
Presets = A;
Type = 1
[PRESA]
Const3 = 0x3f800000

; U toggles volumetric ray-marched light shafts between:
;   - disabled
;   - no stereo fix (vertex shader only)
;   - partial stereo fix
; I tracked down the source code to these - maybe someone can do a better fix:
; https://github.com/robertcupisz/LightShafts
[KEYB]
Key = 85
Presets = B;C;
Type = 1
[PRESB]
Const1 = 0x3f800000
[PRESC]
Const1 = 0x00000000
UseByDef = true

; Q toggles auto HUD depth adjustment
[KEYC]
Key = 81
Presets = D;E;
Type = 1
[PRESD]
Const2 = 0x3f800000
[PRESE]
Const2 = 0x00000000

; Default convergence 0.85 on backslash
[KEYD]
Key = 220
Presets = F;
[PRESF]
UseSepSettings = true
SaveSepSettings = true
Convergence = 0x3f47ae14
UseByDef = true


; Copy MV+MVP matrices from various sources in case of drawing a full-screen
; lighting effect (e.g. physical lighting effect such as specular highlights
; and environment reflections) while directional lighting is not active. Note
; that unlike the Unity 4 fix we do not ask Helix mod to inverse the MV matrix.
; This is because Unity 5 only passes in three columns of the matrix which
; won't work with the generic inverse matrix function. Instead we invert the
; matrix in assembly in the destination shader.
;
; The below shaders are pretty common one in Unity games that we can use, but
; you may need to find others (avoid UI and camera depth/normal shaders that
; often do not have a valid projection matrix). My extract_unity_headers.py
; script is useful to find other shaders that can be used here.


; #!/bin/sh
; 
; for x in *.txt; do
; 	line0=$(head -n 1 $x | sed 's/^[^|]*|//')
; 	# TODO: Filter out known bad sources
; 	line1=$(sed -n 's/^\/\/\s*Matrix \([0-9]\+\) \[glstate_matrix_modelview0\] 3$/GetMatrixFromReg = \1/p' $x|head -n 1)
; 	line2=$(sed -n 's/^\/\/\s*Matrix \([0-9]\+\) \[glstate_matrix_mvp\]$/GetConst2FromReg = \1/p' $x|head -n 1)
; 	if [ -n "$line1" -a -n "$line2" ]; then
; 		echo "[VS$(basename $x .txt)]"
; 		echo "; $line0"
; 		echo "$line1"
; 		echo "$line2"
; 	fi
; done

;[VS05F7E52C]
;;  Matched 65 variants of 2 shaders: Hidden/Internal-DeferredShading, Hidden/Internal-PrePassLighting
;GetMatrixFromReg = 4
;GetConst2FromReg = 0
[VS0D3985FB]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VS107EF89B]
;  Matched 4 variants of 2 shaders: Dreamfall/Backdrop/CustomFog_BumpSpecIllum, Dreamfall/Backdrop/CustomFog_BumpSpecIllum_A
GetMatrixFromReg = 4
GetConst2FromReg = 0
[VS1112F180]
;  Matched 4 variants of 2 shaders: Dreamfall/Backdrop/CustomFog_BumpSpecIllum, Dreamfall/Backdrop/CustomFog_BumpSpecIllum_A
GetMatrixFromReg = 4
GetConst2FromReg = 0
[VS116B529C]
;  Matched 4 variants of 2 shaders: Dreamfall/Backdrop/CustomFog_BumpSpecIllum, Dreamfall/Backdrop/CustomFog_BumpSpecIllum_A
GetMatrixFromReg = 4
GetConst2FromReg = 0
[VS1696BF25]
;  Matched 6 variants of 6 shaders: Particles/Additive, Particles/Additive (Soft), Particles/Alpha Blended, Particles/Multiply, Particles/Multiply (Double), Particles/~Additive-Multiply
GetMatrixFromReg = 4
GetConst2FromReg = 0
[VS17734E7B]
;  Matched 2 variants of 2 shaders: Dreamfall/Backdrop/CustomFog_BumpSpecIllum, Dreamfall/Backdrop/CustomFog_BumpSpecIllum_A
GetMatrixFromReg = 4
GetConst2FromReg = 0
;[VS18CD7F2E]
;;  Matched 131 variants of 5 shaders: Hidden/Internal-DeferredReflections, Hidden/Internal-DeferredShading, Hidden/Internal-PrePassLighting, Hidden/ShadowSoftener-DeferredShading, Hidden/ShadowSoftener-PrePassLighting
;GetMatrixFromReg = 4
;GetConst2FromReg = 0
[VS1A9CA980]
;  Matched 64 variants of 1 shaders: Hidden/FogVolume
GetMatrixFromReg = 4
GetConst2FromReg = 0
[VS1D2A681F]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VS22EBE928]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VS28DC7929]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VS2C124C4B]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VS2E9A5B4A]
;  Unity headers extracted from SpeedTreeBillboard.shader
GetMatrixFromReg = 60
GetConst2FromReg = 48
[VS307053C1]
;  Matched 4 variants of 2 shaders: Dreamfall/Backdrop/CustomFog_BumpSpecIllum, Dreamfall/Backdrop/CustomFog_BumpSpecIllum_A
GetMatrixFromReg = 4
GetConst2FromReg = 0
[VS32C4732E]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VS3E0A2456]
;  Matched 2 variants of 2 shaders: Dreamfall/Backdrop/CustomFog_BumpSpecIllum, Dreamfall/Backdrop/CustomFog_BumpSpecIllum_A
GetMatrixFromReg = 8
GetConst2FromReg = 4
[VS46B69BA6]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VS4855CBB2]
;  Matched 4 variants of 2 shaders: Dreamfall/Backdrop/CustomFog_BumpSpecIllum, Dreamfall/Backdrop/CustomFog_BumpSpecIllum_A
GetMatrixFromReg = 4
GetConst2FromReg = 0
[VS4943B496]
;  Matched 2 variants of 2 shaders: Dreamfall/Backdrop/CustomFog_BumpSpecIllum, Dreamfall/Backdrop/CustomFog_BumpSpecIllum_A
GetMatrixFromReg = 8
GetConst2FromReg = 4
[VS4C11A863]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VS4FD0208F]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VS50116D15]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VS56418208]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VS597503BF]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VS61FEE124]
;  Matched 2 variants of 2 shaders: Dreamfall/Backdrop/CustomFog_BumpSpecIllum, Dreamfall/Backdrop/CustomFog_BumpSpecIllum_A
GetMatrixFromReg = 4
GetConst2FromReg = 0
[VS630B218D]
;  Matched 4 variants of 2 shaders: Dreamfall/Backdrop/CustomFog_BumpSpecIllum, Dreamfall/Backdrop/CustomFog_BumpSpecIllum_A
GetMatrixFromReg = 4
GetConst2FromReg = 0
[VS66C12748]
;  Unity headers extracted from SpeedTree.shader
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VS6976B6F6]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VS6D38084F]
;  Unity headers extracted from SpeedTree.shader
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VS6D5E1461]
;  Matched 6 variants of 6 shaders: Particles/Additive, Particles/Additive (Soft), Particles/Alpha Blended, Particles/Multiply, Particles/Multiply (Double), Particles/~Additive-Multiply
GetMatrixFromReg = 4
GetConst2FromReg = 0
[VS771B6D48]
;  Unity headers extracted from SpeedTree.shader
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VS7D9961E6]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree Billboard
GetMatrixFromReg = 60
GetConst2FromReg = 48
[VS8081B494]
;  Unity headers extracted from SpeedTree.shader
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VS8398836C]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree Billboard
GetMatrixFromReg = 60
GetConst2FromReg = 48
[VS8AC5CEC8]
;  Unity headers extracted from SpeedTreeBillboard.shader
GetMatrixFromReg = 60
GetConst2FromReg = 48
[VS8C80C703]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree Billboard
GetMatrixFromReg = 60
GetConst2FromReg = 48
[VS8D872950]
;  Unity headers extracted from SpeedTree.shader
GetMatrixFromReg = 20
GetConst2FromReg = 16
;[VS8FC2469D]
;;  Unity headers extracted from ScreenDistort.shader
;GetMatrixFromReg = 4
;GetConst2FromReg = 0
[VS97183CD9]
;  Unity headers extracted from SpeedTreeBillboard.shader
GetMatrixFromReg = 60
GetConst2FromReg = 48
[VS9DE7F8F9]
;  Unity headers extracted from SpeedTree.shader
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VS9FC2C22B]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VSA047400B]
;  Unity headers extracted from SpeedTree.shader
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VSACDBDD9B]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree Billboard
GetMatrixFromReg = 60
GetConst2FromReg = 48
[VSAD105294]
;  Matched 6 variants of 6 shaders: Particles/Additive, Particles/Additive (Soft), Particles/Alpha Blended, Particles/Multiply, Particles/Multiply (Double), Particles/~Additive-Multiply
GetMatrixFromReg = 4
GetConst2FromReg = 0
[VSB8AA5CF9]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree Billboard
GetMatrixFromReg = 60
GetConst2FromReg = 48
[VSC4904609]
;  Matched 4 variants of 2 shaders: Dreamfall/Backdrop/CustomFog_BumpSpecIllum, Dreamfall/Backdrop/CustomFog_BumpSpecIllum_A
GetMatrixFromReg = 4
GetConst2FromReg = 0
[VSC72ED75E]
;  Matched 4 variants of 4 shaders: Dreamfall/FX/Additive (Soft) Boost, Dreamfall/FX/Additive (Soft) Boost_Overlay, Particles/Alpha Blended Premultiply, Sonic Ether/Particles/Additive
GetMatrixFromReg = 4
GetConst2FromReg = 0
[VSCABCCD74]
;  Matched 2 variants of 2 shaders: Dreamfall/Backdrop/CustomFog_BumpSpecIllum, Dreamfall/Backdrop/CustomFog_BumpSpecIllum_A
GetMatrixFromReg = 4
GetConst2FromReg = 0
;[VSCCCB6229]
;;  Unity headers extracted from MotionBlurClear.shader
;GetMatrixFromReg = 4
;GetConst2FromReg = 0
[VSD1039FB6]
;  Matched 6 variants of 6 shaders: Particles/Additive, Particles/Additive (Soft), Particles/Alpha Blended, Particles/Multiply, Particles/Multiply (Double), Particles/~Additive-Multiply
GetMatrixFromReg = 4
GetConst2FromReg = 0
[VSDBB61A64]
;  Unity headers extracted from SpeedTreeBillboard.shader
GetMatrixFromReg = 60
GetConst2FromReg = 48
[VSDC33497A]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree Billboard
GetMatrixFromReg = 60
GetConst2FromReg = 48
[VSDD1E6D1E]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VSE6910B7F]
;  Matched 4 variants of 2 shaders: Dreamfall/Backdrop/CustomFog_BumpSpecIllum, Dreamfall/Backdrop/CustomFog_BumpSpecIllum_A
GetMatrixFromReg = 4
GetConst2FromReg = 0
[VSEBAB0E3F]
;  Matched 64 variants of 1 shaders: Hidden/FogVolume
GetMatrixFromReg = 4
GetConst2FromReg = 0
[VSEC2C48B1]
;  Matched 2 variants of 2 shaders: Dreamfall/Backdrop/CustomFog_BumpSpecIllum, Dreamfall/Backdrop/CustomFog_BumpSpecIllum_A
GetMatrixFromReg = 4
GetConst2FromReg = 0
[VSEDB7435E]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree Billboard
GetMatrixFromReg = 60
GetConst2FromReg = 48
[VSEE600477]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree
GetMatrixFromReg = 20
GetConst2FromReg = 16
[VSF0AECC06]
;  Matched 3 variants of 1 shaders: Nature/SpeedTree Billboard
GetMatrixFromReg = 60
GetConst2FromReg = 48
[VSF8281F5C]
;  Unity headers extracted from SpeedTree.shader
GetMatrixFromReg = 20
GetConst2FromReg = 16


; XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
; XXXXXXXXXXXXXXX THIS IS NOT WORKING IN DREAMFALL CHAPTERS XXXXXXXXXXXXXXXXXXX
; XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
; With this enabled, const4 seems to be set at times when the copied matrix is
; not valid. Not sure if the game is rendering directional shadows off-screen,
; or if something else is bogus here. Regardless, disable this FOV source and
; we will rely on the Unity 4 technique of using MV.I * MVP to find P, copying
; the matrices from wherever we can find them.
;
; ; In Unity 5, the directional lighting shader has the inverse projection
; ; matrix, which we need to fix the lights/shadows, so copy it to other lighting
; ; shaders whenever it is active. Use a preset to set Const4 to signify when
; ; this matrix is valid and fall back to other techniques if it is not.
;
; [VS678DC18B]
; ; Hidden/Internal-PrePassCollectShadows
; GetConst3FromReg = 4
; PresIndex = 16
;
; [VS00933666]
; ; Hidden/Internal-PrePassCollectShadows
; GetConst3FromReg = 4
; PresIndex = 16
;
; [PRES10]
; ; PRES10 (hexadecimal) is PresIndex 16 (decimal)
; ; Signifies that the inverse projection matrix is currently valid
; Const4 = 0x3f800000
; XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

; The lighting shaders will use the inverse projection matrix copied from the
; directional lighting shader if it is valid. At times when it is not valid the
; shader will fall back to other techniques. Point and spot lights will
; calculate it from the MV+MVP matrices passed into the shader from the game,
; and full-screen lighting effects (e.g. physical lighting) will use the
; matrices copied from other unrelated shaders (see above - additional shaders
; may be necessary). If all else fails, a hard coded constant can be set in
; the vertex shader in c220.w

[VS05F7E52C]
; Matched 65 variants of 2 shaders: Hidden/Internal-DeferredShading, Hidden/Internal-PrePassLighting
SetConst3ToReg = 170
UseMatrix = true
MatrixReg = 180
SetConst2ToReg = 190


; Copy _CameraDepthTexture and _ZBufferParams from the lighting pixel shaders
; for the auto-HUD depth. Can easily add more sources if needed, could
; alternatively use _ProjectionParams instead of _ZBufferParams with slightly
; different maths
;
; Bourne script to produce this list when run from ShaderOverride/PixelShaders
;
; #!/bin/sh
; 
; for x in *.txt; do
; 	line1=$(sed -n 's/^\/\/\s*Vector \([0-9]\+\) \[_ZBufferParams\]$/GetConst1FromReg = \1/p' $x | head -n 1)
; 	line2=$(sed -n 's/^\/\/\s*SetTexture \([0-9]\+\) \[_CameraDepthTexture\] 2D 0$/GetSampler1FromReg = \1/p' $x | head -n 1)
; 	if [ -n "$line1" -a -n "$line2" ]; then
; 		echo "[PS$(basename $x .txt)]"
; 		echo "$line1"
; 		echo "$line2"
; 	fi
; done
[PS01F8F894]
GetConst1FromReg = 7
GetSampler1FromReg = 0
[PS02902976]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PS06066820]
GetConst1FromReg = 23
GetSampler1FromReg = 0
[PS0681D61F]
GetConst1FromReg = 23
GetSampler1FromReg = 0
[PS0801946C]
GetConst1FromReg = 17
GetSampler1FromReg = 0
[PS0B3F8670]
GetConst1FromReg = 4
GetSampler1FromReg = 0
[PS0CDF90A0]
GetConst1FromReg = 7
GetSampler1FromReg = 0
[PS0DA4C43C]
GetConst1FromReg = 13
GetSampler1FromReg = 0
[PS0DDB5BF6]
GetConst1FromReg = 13
GetSampler1FromReg = 0
[PS0FC1A033]
GetConst1FromReg = 7
GetSampler1FromReg = 0
[PS10606CB1]
GetConst1FromReg = 9
GetSampler1FromReg = 0
[PS135F6100]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PS150006E4]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PS15EAA985]
GetConst1FromReg = 4
GetSampler1FromReg = 0
[PS16199490]
GetConst1FromReg = 8
GetSampler1FromReg = 0
[PS1724D8BB]
GetConst1FromReg = 4
GetSampler1FromReg = 0
[PS17EDBA51]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PS19C2A1FD]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PS1B412E9A]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PS1BE44CE6]
GetConst1FromReg = 4
GetSampler1FromReg = 0
[PS22DCBCBE]
GetConst1FromReg = 9
GetSampler1FromReg = 0
[PS2348F32B]
GetConst1FromReg = 7
GetSampler1FromReg = 0
[PS252C7782]
GetConst1FromReg = 7
GetSampler1FromReg = 0
[PS26308730]
GetConst1FromReg = 9
GetSampler1FromReg = 0
[PS3502ADF2]
GetConst1FromReg = 4
GetSampler1FromReg = 0
[PS36A5627D]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PS39394D07]
GetConst1FromReg = 17
GetSampler1FromReg = 0
[PS3FFF9BA7]
GetConst1FromReg = 8
GetSampler1FromReg = 0
[PS448CC256]
GetConst1FromReg = 8
GetSampler1FromReg = 0
[PS45D89508]
GetConst1FromReg = 8
GetSampler1FromReg = 0
[PS4F796B2B]
GetConst1FromReg = 19
GetSampler1FromReg = 0
[PS52BF17AE]
GetConst1FromReg = 4
GetSampler1FromReg = 0
[PS5647A018]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PS57128A44]
GetConst1FromReg = 8
GetSampler1FromReg = 0
[PS5AA39C0B]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PS61A95CBE]
GetConst1FromReg = 17
GetSampler1FromReg = 0
[PS651CFCBD]
GetConst1FromReg = 8
GetSampler1FromReg = 0
[PS6818BFC8]
GetConst1FromReg = 4
GetSampler1FromReg = 0
[PS6831771E]
GetConst1FromReg = 4
GetSampler1FromReg = 0
[PS694C2295]
GetConst1FromReg = 4
GetSampler1FromReg = 0
[PS6D6BB94B]
GetConst1FromReg = 4
GetSampler1FromReg = 0
[PS6E0BD3D4]
GetConst1FromReg = 23
GetSampler1FromReg = 0
[PS70B8A828]
GetConst1FromReg = 4
GetSampler1FromReg = 0
[PS71BEF0CC]
GetConst1FromReg = 7
GetSampler1FromReg = 0
[PS72D4F015]
GetConst1FromReg = 17
GetSampler1FromReg = 0
[PS76FEE5CF]
GetConst1FromReg = 7
GetSampler1FromReg = 0
[PS77287B36]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PS813449F8]
GetConst1FromReg = 4
GetSampler1FromReg = 0
[PS81AFFE10]
GetConst1FromReg = 9
GetSampler1FromReg = 0
[PS83E8AAA3]
GetConst1FromReg = 4
GetSampler1FromReg = 0
[PS8AA24252]
GetConst1FromReg = 8
GetSampler1FromReg = 0
[PS8C7699BA]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PS8F1D5B60]
GetConst1FromReg = 13
GetSampler1FromReg = 0
[PS90383BEA]
GetConst1FromReg = 8
GetSampler1FromReg = 0
[PS97D30516]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PS9827669A]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PS9B067093]
GetConst1FromReg = 19
GetSampler1FromReg = 0
[PS9B6516E2]
GetConst1FromReg = 7
GetSampler1FromReg = 0
[PS9BCC0676]
GetConst1FromReg = 8
GetSampler1FromReg = 0
[PS9C8CD909]
GetConst1FromReg = 8
GetSampler1FromReg = 0
[PS9DA1BDE0]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PSA0825A9B]
GetConst1FromReg = 8
GetSampler1FromReg = 0
[PSA1E36BD8]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PSA331933B]
GetConst1FromReg = 8
GetSampler1FromReg = 0
[PSA52202DD]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PSA8A9DD4F]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PSACE39E94]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PSB02C23AE]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PSB16734E5]
GetConst1FromReg = 7
GetSampler1FromReg = 0
[PSB56AD63E]
GetConst1FromReg = 8
GetSampler1FromReg = 0
[PSBB575DFB]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PSC0AB78AB]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PSC66FBE13]
GetConst1FromReg = 8
GetSampler1FromReg = 0
[PSC8098633]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PSCBB9AC54]
GetConst1FromReg = 7
GetSampler1FromReg = 0
[PSCEA1CB36]
GetConst1FromReg = 7
GetSampler1FromReg = 0
[PSD48829B7]
GetConst1FromReg = 9
GetSampler1FromReg = 0
[PSDF6C362A]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PSE0967031]
GetConst1FromReg = 7
GetSampler1FromReg = 0
[PSE1389C8C]
GetConst1FromReg = 7
GetSampler1FromReg = 0
[PSE3386D4D]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PSE67F99F8]
GetConst1FromReg = 7
GetSampler1FromReg = 0
[PSE8C86F92]
GetConst1FromReg = 7
GetSampler1FromReg = 0
[PSEC47A590]
GetConst1FromReg = 4
GetSampler1FromReg = 0
[PSEDFFE05A]
GetConst1FromReg = 19
GetSampler1FromReg = 0
[PSF1897C41]
GetConst1FromReg = 8
GetSampler1FromReg = 0
[PSF3F2B9D0]
GetConst1FromReg = 7
GetSampler1FromReg = 0
[PSF4072DE7]
GetConst1FromReg = 5
GetSampler1FromReg = 0
[PSF87E2C05]
GetConst1FromReg = 4
GetSampler1FromReg = 0
[PSFA0BD528]
GetConst1FromReg = 17
GetSampler1FromReg = 0
[PSFA5C5F33]
GetConst1FromReg = 13
GetSampler1FromReg = 0
[PSFC5C0FFC]
GetConst1FromReg = 4
GetSampler1FromReg = 0
[PSFFD11AB2]
GetConst1FromReg = 13
GetSampler1FromReg = 0

; HUD shaders
[VS01115DCE]
; Copy _CameraDepthTexture and _ZBufferParams in for auto-HUD depth:
SetSampler1ToReg = 260
SetConst1ToReg = 150
CheckTexCRC = true
UseDefinedOnly = false
VBOffsetList = 0;
[VB01115DCE.0]
[VS05CE98F7]
; Copy _CameraDepthTexture and _ZBufferParams in for auto-HUD depth:
SetSampler1ToReg = 260
SetConst1ToReg = 150
CheckTexCRC = true
UseDefinedOnly = false
VBOffsetList = 0;
[VB05CE98F7.0]
[VS2FC2E74B]
; Copy _CameraDepthTexture and _ZBufferParams in for auto-HUD depth:
SetSampler1ToReg = 260
SetConst1ToReg = 150
CheckTexCRC = true
UseDefinedOnly = false
VBOffsetList = 0;
[VB2FC2E74B.0]
[VS3DEF2D79]
; Copy _CameraDepthTexture and _ZBufferParams in for auto-HUD depth:
SetSampler1ToReg = 260
SetConst1ToReg = 150
CheckTexCRC = true
UseDefinedOnly = false
VBOffsetList = 0;
[VB3DEF2D79.0]
[VS6AEB3DDF]
; Copy _CameraDepthTexture and _ZBufferParams in for auto-HUD depth:
SetSampler1ToReg = 260
SetConst1ToReg = 150
CheckTexCRC = true
UseDefinedOnly = false
VBOffsetList = 0;
[VB6AEB3DDF.0]

; Fix for specular highlights and reflections that are not using deferred
; lighting shaders. These need the world space camera position adjusted, which
; we do by multiplying the adjustment amount by the inversed MVP matrix then
; the _Object2World matrix. We use Helix Mod to inverse the MVP matrix and
; calculate the adjusted camera position in the vertex shader, which we then
; pass through to the pixel shader to replace the one passed to it from Unity:
[VS68D32F2E]
; Matched 12 variants of 3 shaders: Chickenlord/Detail/Bumped Specular, Dreamfall/Unity5/Standard_BarutiJacket, Dreamfall/Unity5/Standard_BumpedDetail_Ilum
GetMatrixFromReg1 = 0
InverseMatrix1 = true
UseMatrix1 = true
MatrixReg1 = 180
[VS53CE20E1]
; Matched 16 variants of 4 shaders: Dreamfall/Detail/Bumped Specular VertexColor, Dreamfall/Unity5/Standard VertexColor, Dreamfall/Unity5/Standard_BumpedDetail, Dreamfall/Unity5/Standard_BumpedDetail_Cutout2Sided
GetMatrixFromReg1 = 0
InverseMatrix1 = true
UseMatrix1 = true
MatrixReg1 = 180
[VS6E5F85DB]
; Matched 48 variants of 12 shaders: Dreamfall/BlurredReflective/Bumped Spec Vertex Color, Dreamfall/FX/River (Supports Shadows), Dreamfall/Reflective/Fresnel/Bumped Specular DetailBump Cutout 2sided VertexColor, Dreamfall/Unity5/Standard VertexColor_CheapGloss, Dreamfall/Unity5/Standard_VertexBlend_2Tex, Dreamfall/Unity5/Standard_VertexColor_Illum, Dreamfall/Unity5/VertexBlend/Standard_WetGround, Dreamfall/VertexBlend/2Tex_Fresnel, Self-Illumin/Dreamfall/Reflective/Fresnel/Parallax Diffuse Illum, Self-Illumin/Dreamfall/Reflective/Fresnel/Parallax Diffuse Illum MaskDistort, Self-Illumin/Dreamfall/Reflective/Fresnel/Parallax Diffuse Illum Window, Self-Illumin/Dreamfall/Robot Eyes
GetMatrixFromReg1 = 0
InverseMatrix1 = true
UseMatrix1 = true
MatrixReg1 = 180

; Exactly the same specular highlight pattern fixes water reflections:
[VSEC62E113]
; Matched 16 variants of 8 shaders: Dreamfall/BlurredReflective/Bumped Spec Vertex Color, Dreamfall/FX/River (Supports Shadows), Dreamfall/Reflective/Fresnel/Bumped Specular DetailBump Cutout 2sided VertexColor, Dreamfall/VertexBlend/2Tex_Fresnel, Self-Illumin/Dreamfall/Reflective/Fresnel/Parallax Diffuse Illum, Self-Illumin/Dreamfall/Reflective/Fresnel/Parallax Diffuse Illum MaskDistort, Self-Illumin/Dreamfall/Reflective/Fresnel/Parallax Diffuse Illum Window, Self-Illumin/Dreamfall/Robot Eyes
GetMatrixFromReg1 = 0
InverseMatrix1 = true
UseMatrix1 = true
MatrixReg1 = 180
[VS41825E1D]
GetMatrixFromReg1 = 0
InverseMatrix1 = true
UseMatrix1 = true
MatrixReg1 = 180
[VSB7819B68]
; Inverse MVP matrix for _WorldSpaceCameraPos adjustment:
GetMatrixFromReg1 = 0
InverseMatrix1 = true
UseMatrix1 = true
MatrixReg1 = 180
