[General]

// UseRenderedShaders=true is nearly always useful, because it trims the 
// list of shaders seen while hunting down to just those active in the 
// current scene.  Disable this only if you get crashes during hunting.
UseRenderedShaders=true

// DumpAll will generate ASM text files for every shader seen by the game.
// This is usually worth doing once, but not useful for every run.
// DumpAll=true

// Constant registers that will arrive in Vertex and Pixel Shaders, as
// c200.  The constants below will be assigned, based on the key preset.
DefVSConst1 = 200  		
DefPSConst1 = 200

// The PresetKeysList specifies which KEYs will be used.
// Multiple keys lists are supported.
// Note that the KEY sections are in hexadecimal
PresetsKeysList = 0;1;2;3;4;5;6;7;8;9;A;B;C;D;E;

// Allows textures to be cycled with Up/Down - use to hunt menu text CRC32
bCalcTexCRCatStart = true

// Game is borderless window, use a profile that supports 3D in a window. Don't
// use a profile that sets UseStereoMatrix, because although it does fix a
// large number of halo issues, it also causes severe flickering in parts which
// has me worried. Use "3D-Hub Player" which is pretty minimal:
GameProfile = fxdplayer

// Mouse stopped working in game with Helix mod (works in menus)
InitMouse = false

// Makes it crash less when reloading shaders:
OverrideMethod = 2

// Allow access to the screen size in pixel shaders for shadow fix:
DefPSViewSizeConst = 210

// Fixes shadow placement. The fact that this worked was a surprise to me - I
// thought the driver's default was for square render targets to be mono
DefSquareSurfaceMode = 2


SurfaceCreationModeList = 0;1;

// Stereoise LightShaft _DepthEpi render target (didn't seem to work)
[SF0]
DefMode = 1
Format = 115
// Width = 1024
// Height = 1024
// Usage = 1
// Pool = 0
// Levels = 1

// Stereoise LightShaft _CoordEpi render target (didn't seem to work)
[SF1]
DefMode = 1
Format = 115
// Width = 1024
// Height = 1024
// Usage = 1
// Pool = 0
// Levels = 1



// Number row on keyboard sets UI depth to various values between screen depth
// and separation. `~ (left of 1 on US keyboards) sets screen depth, 1-9 sets
// septh in 10% multiples and 0 sets depth to 100% separation.
// Note that the KEY%X on these sections is in hexadecimal, hence we use KEYA
// for the tenth key entry and so on.
[KEY0]
Key = 192
Presets = 0;
Type = 1
[PRES0]
Const3 = 0x00000000
[KEY1]
Key = 49
Presets = 1;
Type = 1
[PRES1]
Const3 = 0x3dcccccd
[KEY2]
Key = 50
Presets = 2;
Type = 1
[PRES2]
Const3 = 0x3e4ccccd
[KEY3]
Key = 51
Presets = 3;
Type = 1
[PRES3]
Const3 = 0x3e99999a
[KEY4]
Key = 52
Presets = 4;
Type = 1
[PRES4]
Const3 = 0x3ecccccd
[KEY5]
Key = 53
Presets = 5;
Type = 1
[PRES5]
Const3 = 0x3f000000
[KEY6]
Key = 54
Presets = 6;
Type = 1
[PRES6]
Const3 = 0x3f19999a
[KEY7]
Key = 55
Presets = 7;
Type = 1
[PRES7]
Const3 = 0x3f333333
[KEY8]
Key = 56
Presets = 8;
Type = 1
[PRES8]
Const3 = 0x3f4ccccd
[KEY9]
Key = 57
Presets = 9;
Type = 1
[PRES9]
Const3 = 0x3f666666
[KEYA]
Key = 48
Presets = A;
Type = 1
[PRESA]
Const3 = 0x3f800000

// U toggles Const1
[KEYB]
Key = 85
Presets = B;C;
Type = 1
[PRESB]
Const1 = 0x3f800000
[PRESC]
Const1 = 0x00000000

// I toggles Const2
[KEYC]
Key = 73
Presets = D;E;
Type = 1
[PRESD]
Const2 = 0x3f800000
[PRESE]
Const2 = 0x00000000

// O toggles Const3
[KEYD]
Key = 79
Presets = F;10;
Type = 1
[PRESF]
Const3 = 0x3f800000
[PRES10]
Const3 = 0x00000000

// P toggles Const4
[KEYE]
Key = 80
Presets = 11;12;
Type = 1
[PRES11]
Const4 = 0x3f800000
[PRES12]
Const4 = 0x00000000



// This game appears to use unitysunshine.com replacement for
// Hidden/Internal-PrePassLighting, so the following CRCs should match for
// other games also using it.

// Get MV and MVP matrices from the VS inputs
[VS92E51A17]
// get glstate_matrix_modelview0 from c0-c3 and invert it
// We also place the inverted matrix back into c180 for use in this shader
UseMatrix = true
GetMatrixFromReg = 0
InverseMatrix = true
MatrixReg = 180
// get glstate_matrix_mvp from c4-c7
UseMatrix1 = true
GetMatrixFromReg1 = 4
InverseMatrix1 = false

// Copy MVP and inverted MV matrices into the PS:
// unitysunshine.com "Hidden/Internal-PrePassLighting" shader with SPOT SHADOWS_DEPTH SHADOWS_NATIVE
[PSFD2FC596]
// c180-c183 has the inverted MV matrix:
UseMatrix = true
MatrixReg = 180
// c190-c193 has the MVP matrix:
UseMatrix1 = true
MatrixReg1 = 190

// ... and so on:
// unitysunshine.com "Hidden/Internal-PrePassLighting" shader with SPOT SHADOWS_OFF
[PSE051955A]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

// unitysunshine.com "Hidden/Internal-PrePassLighting" shader with POINT SHADOWS_OFF
[PSC5B3DACA]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

// More unitysunshine.com shaders
[PS8043C713]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PS0020AFE0]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PS04ED7E6B]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PS0D1EC394]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PS21FE5699]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PS28446FF9]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PS30543CCC]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PS356BC878]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PS40045626]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PS43EA4CAF]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PS49C3F4B4]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PS62B23813]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PS62F2B6BF]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PS7627A6F2]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PS7667285E]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PS8043C713]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PS8767B36F]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PS93F22D8E]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PS94D659F2]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PSAA0A735B]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PSB29F30D0]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PSC5ABAFCB]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PSC5B3DACA]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PSC8C82836]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PSD126442B]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PSDC5DB6D7]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PSE051955A]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PSE0BDEC4E]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PSE9BA5B77]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PSEA0E4115]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PSF42872AF]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PSF4C40BBB]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PSFD2FC596]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190

[PSFE9BDFF4]
UseMatrix = true
MatrixReg = 180
UseMatrix1 = true
MatrixReg1 = 190



// Blacklist UI depth adjustment for certain effects.
//
// 0DA4BD7E, 7450232C:
// Disable UI depth adjustment for inventory background. Alternatively I can
// adjust the shaders for the objects in the inventory, but I'm concerned that
// there might be a lot of them, and potentially missable ones. The inventory
// is already pushed a short distance into the scene anyway.
//
// 9ED6D1D3:
// Full-screen white texture used to fade in and out of cinematics. I'd love to
// do the same to the all black texture when e.g. pausing the game, but it's
// hard to track it down since it looks exactly the same when disabled
[VS9F7BB09C]
CheckTexCRC = true
ValNotDefined = 0
ValForDefined = 1
TexCounterReg = 251
UseDefinedOnly = false
DefinedTexturesVS = 0DA4BD7E;7450232C;9ED6D1D3;
