// Some reflections
// Generated by Microsoft (R) D3D Shader Disassembler
//
//   using 3Dmigoto v1.2.43 on Mon Apr 10 23:50:09 2017
//
//
// Input signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// no Input
//
// Output signature:
//
// Name                 Index   Mask Register SysValue  Format   Used
// -------------------- ----- ------ -------- -------- ------- ------
// no Output
cs_5_0
dcl_globalFlags refactoringAllowed
dcl_constantbuffer cb1[896], dynamicIndexed
dcl_constantbuffer cb0[46], dynamicIndexed
dcl_sampler s0, mode_default
dcl_resource_texture2d (float,float,float,float) t0
dcl_resource_texture2d (float,float,float,float) t1
dcl_resource_texture2d (float,float,float,float) t2
dcl_resource_texture2d (float,float,float,float) t6
dcl_resource_texture2d (float,float,float,float) t10
dcl_resource_structured t19, 16 
dcl_resource_structured t20, 4 
dcl_resource_texture2d (uint,uint,uint,uint) t23
dcl_resource_texture3d (float,float,float,float) t24
dcl_resource_structured t25, 4 
dcl_uav_typed_texture2d (float,float,float,float) u0
dcl_uav_typed_texture2d (float,float,float,float) u1
dcl_input vThreadIDInGroupFlattened
dcl_input vThreadGroupID.x
dcl_input vThreadIDInGroup.xy

dcl_temps 60

// 3DMigoto StereoParams:
dcl_resource_texture1d (float,float,float,float) t120
dcl_resource_texture2d (float,float,float,float) t125
ld_indexable(texture1d)(float,float,float,float) r41.xyzw, l(0, 0, 0, 0), t120.xyzw
ld_indexable(texture2d)(float,float,float,float) r40.xyzw, l(0, 0, 0, 0), t125.xyzw

// Disable the fix or not?
ld_indexable(texture1d)(float,float,float,float) r42.x, l(2, 0, 0, 0), t120.xyzw
ne r43.x, l(0.000000, 0.000000, 0.000000, 0.000000), r42.x

dcl_tgsm_raw g0, 4
dcl_tgsm_raw g1, 4
dcl_tgsm_raw g2, 4
dcl_thread_group 16, 16, 1
ld_structured_indexable(structured_buffer, stride=4)(mixed,mixed,mixed,mixed) r0.x, vThreadGroupID.x, l(0), t25.xxxx
ushr r1.x, r0.x, l(16)
and r1.y, r0.x, l(0x0000ffff)
imad r0.xyzw, r1.xyyy, l(16, 16, 16, 16), vThreadIDInGroup.xyyy
if_z vThreadIDInGroupFlattened.x
  utof r2.xy, r1.yxyy
  utof r2.z, cb0[8].z
  mad r2.x, r2.x, r2.z, r2.y
  ftou r2.x, r2.x
  ld_structured_indexable(structured_buffer, stride=16)(mixed,mixed,mixed,mixed) r2.xy, r2.x, l(0), t19.xyxx
  and r2.y, r2.y, l(0x0000ffff)
  store_raw g0.x, l(0), r2.x
  store_raw g1.x, l(0), r2.y
  mov r1.zw, l(0,0,0,0)
  ld_indexable(texture2d)(uint,uint,uint,uint) r1.x, r1.xyzw, t23.xyzw
  store_raw g2.x, l(0), r1.x
endif 
sync_g_t
utof r1.xy, r0.xwxx
add r1.zw, r1.xxxy, l(0.000000, 0.000000, 0.500000, 0.500000)
mul r1.zw, r1.zzzw, cb0[5].zzzw
ftoi r2.xy, r1.xyxx
mov r2.zw, l(0,0,0,0)
ld_indexable(texture2d)(float,float,float,float) r3.xyzw, r2.xyww, t0.xyzw
ld_indexable(texture2d)(float,float,float,float) r4.xyzw, r2.xyww, t1.xyzw
ld_indexable(texture2d)(float,float,float,float) r5.xyz, r2.xyww, t2.xyzw
ld_indexable(texture2d)(float,float,float,float) r2.z, r2.xyzw, t6.yzxw
mul r1.x, r4.w, l(6.000000)
round_ne r1.x, r1.x
ftou r1.x, r1.x
mad r6.xy, r3.xyxx, l(2.000000, 2.000000, 0.000000, 0.000000), l(-1.000000, -1.000000, 0.000000, 0.000000)
dp2 r1.y, r6.xyxx, r6.xyxx
min r1.y, r1.y, l(1.000000)
add r1.y, -r1.y, l(1.000000)
sqrt r6.z, r1.y
imul null, r1.x, r1.x, l(3)
dp3 r7.x, r6.xyzx, cb0[r1.x + 28].xyzx
dp3 r7.y, r6.xyzx, cb0[r1.x + 29].xyzx
dp3 r7.z, r6.xyzx, cb0[r1.x + 30].xyzx
add r1.x, -r3.z, l(1.000000)
mul r1.y, r3.w, l(3.000000)
round_ne r1.y, r1.y
ftoi r1.y, r1.y
ieq r3.xy, r1.yyyy, l(2, 1, 0, 0)
and r1.y, r5.x, r3.x
mul r3.x, r5.x, l(7.968750)
ftoi r3.x, r3.x
imin r3.x, r3.x, l(7)
and r3.x, r3.x, r3.y
movc r3.z, r3.y, l(0), r5.y
add r3.w, -r1.y, l(1.000000)
mul r3.w, r3.w, r5.z
mul r3.w, r3.w, r3.w
mul r4.w, r3.w, l(0.160000)
mad r5.xyz, -r3.wwww, l(0.160000, 0.160000, 0.160000, 0.000000), r4.xyzx
mad r5.xyz, r3.zzzz, r5.xyzx, r4.wwww
dp3 r3.w, r5.xyzx, l(0.330000, 0.330000, 0.330000, 0.000000)
mul_sat r3.w, r3.w, l(50.000000)
mul r6.x, r1.x, r1.x
ld_raw r4.w, l(0), g2.xxxx
ubfe r4.w, l(1), l(1), r4.w
ine r4.w, r4.w, l(0)
ishl r3.x, l(1), r3.x
and r3.x, r3.x, cb0[7].y
ine r3.x, r3.x, l(0)
and r3.x, r3.x, r3.y
and r3.x, r3.x, r4.w
if_nz r3.x
  mov r8.xyz, l(1.000000,1.000000,1.000000,0)
  mov r3.x, l(1)
else 
  add r3.y, -r3.z, l(1.000000)
  mul r8.xyz, r3.yyyy, r4.xyzx
  and r3.x, cb0[7].x, l(1)
endif 
mad r3.yz, r1.zzwz, l(0.000000, 2.000000, 2.000000, 0.000000), l(0.000000, -1.000000, -1.000000, 0.000000)
mul r2.xy, r3.yzyy, l(1.000000, -1.000000, 0.000000, 0.000000)
mov r2.w, l(1.000000)

if_nz r43.x
// depth
dp4 r38.x, r2.xyzw, cb0[3].xyzw

// stereo.y * depth
mul r40.w, r40.y, r38.x

// (stereo.y * depth - 1)
add r40.w, r40.w, l(-1.000)

// stereo.x * (stereo.y * depth - 1)
mul r40.w, r40.x, r40.w

// r2.x += stereo.x * (stereo.y * depth - 1)
mov r38.x, r2.x
add r38.x, r38.x, r40.w
mov r2.x, r38.x
endif

// Original Fix
dp4 r4.x, r2.xyzw, cb0[0].xyzw
dp4 r4.y, r2.xyzw, cb0[1].xyzw
dp4 r4.z, r2.xyzw, cb0[2].xyzw
dp4 r2.x, r2.xyzw, cb0[3].xyzw
div r2.x, l(1.000000, 1.000000, 1.000000, 1.000000), r2.x


mul r2.yzw, r2.xxxx, r4.xxyz
dp3 r3.y, -r2.yzwy, -r2.yzwy
rsq r3.y, r3.y
mul r9.xyz, -r2.yzwy, r3.yyyy
sample_l_indexable(texture2d)(float,float,float,float) r10.xyzw, r1.zwzz, t10.xyzw, s0, l(0.000000)
mad r10.yzw, r10.wwyz, l(0.000000, 2.000000, 2.000000, 2.000000), l(0.000000, -1.000000, -1.000000, -1.000000)
dp3 r1.z, r10.yzwy, r10.yzwy
rsq r1.z, r1.z
mul r10.yzw, r1.zzzz, r10.yyzw
ld_raw r1.z, l(0), g0.xxxx
ld_raw r1.w, l(0), g1.xxxx
iadd r1.w, r1.z, r1.w
dp3 r3.z, r7.xyzx, r9.xyzx
add r3.z, |r3.z|, l(0.000010)
add r9.xyz, -r5.xyzx, r3.wwww
max r3.w, r6.x, l(0.002000)
mul r3.w, r3.w, r3.w
mad r4.w, -r3.z, r3.w, r3.z
mad r4.w, r4.w, r3.z, r3.w
sqrt r4.w, r4.w
mad r5.w, r1.x, l(-0.337748349), l(1.000000)
add r6.w, -r3.z, l(1.000000)
mul r7.w, r6.w, r6.w
mul r7.w, r7.w, r7.w
mul r6.w, r6.w, r7.w
lt r7.w, l(0.000000), r1.y
mul r8.w, r3.z, r3.z
mad r8.w, r8.w, l(0.999996), l(0.00000400000044)
sqrt r8.w, r8.w
mov r6.z, r10.x
mov r11.xyz, l(0,0,0,0)
mov r12.xyz, l(0,0,0,0)
mov r9.w, r1.z
loop 
  uge r11.w, r9.w, r1.w
  breakc_nz r11.w
  ld_structured_indexable(structured_buffer, stride=4)(mixed,mixed,mixed,mixed) r11.w, r9.w, l(0), t20.xxxx
  imul null, r11.w, r11.w, l(7)
  mad r13.xyz, -r4.xyzx, r2.xxxx, cb1[r11.w + 0].xyzx
  dp3 r12.w, r13.xyzx, r13.xyzx
  rsq r13.w, r12.w
  mul r13.xyz, r13.wwww, r13.xyzx
  add r13.w, r12.w, cb1[r11.w + 1].w
  max r13.w, r13.w, l(0.000100)
  div r13.w, l(1.000000, 1.000000, 1.000000, 1.000000), r13.w
  mul r12.w, r12.w, cb1[r11.w + 0].w
  mad r12.w, -r12.w, r12.w, l(1.000000)
  max r12.w, r12.w, l(0.000000)
  mul r12.w, r12.w, r12.w
  mul r12.w, r12.w, r13.w
  dp3 r13.w, cb1[r11.w + 2].xyzx, r13.xyzx
  mad_sat r13.w, r13.w, cb1[r11.w + 5].x, cb1[r11.w + 5].y
  mul r13.w, r13.w, r13.w
  mul r12.w, r12.w, r13.w
  dp3_sat r13.w, r7.xyzx, r13.xyzx
  mul r12.w, r12.w, r13.w
  lt r14.x, l(0.000000), r12.w
  if_nz r14.x
    mad r14.xyz, -r2.yzwy, r3.yyyy, r13.xyzx
    dp3 r14.w, r14.xyzx, r14.xyzx
    rsq r14.w, r14.w
    mul r14.xyz, r14.wwww, r14.xyzx
    dp3_sat r13.x, r13.xyzx, r14.xyzx
    dp3_sat r13.y, r7.xyzx, r14.xyzx
    add r13.z, -r13.x, l(1.000000)
    mul r14.w, r13.z, r13.z
    mul r14.w, r14.w, r14.w
    mul r13.z, r13.z, r14.w
    mad r15.xyz, r9.xyzx, r13.zzzz, r5.xyzx
    mad r14.w, -r13.w, r3.w, r13.w
    mad r14.w, r14.w, r13.w, r3.w
    sqrt r14.w, r14.w
    mul r14.w, r3.z, r14.w
    mad r14.w, r13.w, r4.w, r14.w
    add r14.w, r14.w, l(0.002000)
    div r14.w, l(0.500000), r14.w
    mad r15.w, r13.y, r3.w, -r13.y
    mad r15.w, r15.w, r13.y, l(1.000150)
    mul r15.w, r15.w, r15.w
    div r15.w, r3.w, r15.w
    mul r14.w, r14.w, r15.w
    mul r15.xyz, r14.wwww, r15.xyzx
    mul r13.x, r13.x, r13.x
    dp2 r13.x, r13.xxxx, r1.xxxx
    mad r13.x, r1.x, l(0.500000), r13.x
    add r14.w, -r13.w, l(1.000000)
    mul r15.w, r14.w, r14.w
    mul r15.w, r15.w, r15.w
    mul r14.w, r14.w, r15.w
    add r13.x, r13.x, l(-1.000000)
    mad r15.w, r13.x, r14.w, l(1.000000)
    mad r13.x, r13.x, r6.w, l(1.000000)
    mul r13.x, r13.x, r15.w
    mul r16.xyz, r5.wwww, r13.xxxx
    if_nz r7.w
      mad r13.x, r14.w, l(0.960000), l(0.040000)
      mad r13.x, -r1.y, r13.x, l(1.000000)
      mul r16.xyz, r13.xxxx, r16.zzzz
      mad r13.z, r13.z, l(0.960000), l(0.040000)
      mul r14.w, r13.w, r13.w
      mad r14.w, r14.w, l(0.999996), l(0.00000400000044)
      sqrt r14.w, r14.w
      mul r14.w, r3.z, r14.w
      mad r13.w, r13.w, r8.w, r14.w
      add r13.w, r13.w, l(0.002000)
      mul r13.y, r13.y, r13.y
      mad r13.y, r13.y, l(-0.999996), l(1.000150)
      mul r13.y, r13.y, r13.y
      div r13.yw, l(0.000000, 0.00000400000044, 0.000000, 0.500000), r13.yyyw
      mul r13.y, r13.w, r13.y
      mul r13.y, r1.y, r13.y
      mul r13.y, r13.y, r13.z
      mad r15.xyz, r15.xyzx, r13.xxxx, r13.yyyy
    endif 
    mul r13.x, r12.w, cb1[r11.w + 2].w
    mul r13.xyz, r13.xxxx, cb1[r11.w + 1].xyzx
    mul r13.xyz, r13.xyzx, r16.xyzx
    mul r12.w, r12.w, cb1[r11.w + 3].w
    mul r16.xyz, r12.wwww, cb1[r11.w + 1].xyzx
    mul r15.xyz, r15.xyzx, r16.xyzx
    dp3 r11.w, r10.yzwy, r14.xyzx
    add r12.w, -|r11.w|, l(1.000000)
    sqrt r12.w, r12.w
    mad r13.w, |r11.w|, l(-0.0187292993), l(0.074261)
    mad r13.w, r13.w, |r11.w|, l(-0.212114394)
    mad r13.w, r13.w, |r11.w|, l(1.57072878)
    mul r14.x, r12.w, r13.w
    mad r14.x, r14.x, l(-2.000000), l(3.14159274)
    lt r11.w, r11.w, -r11.w
    and r11.w, r11.w, r14.x
    mad r6.y, r13.w, r12.w, r11.w
    add r14.xyz, r6.xyzx, -cb0[26].xyzx
    mul r14.xyz, r14.xyzx, cb0[27].xyzx
    sample_l_indexable(texture3d)(float,float,float,float) r6.y, r14.xyzx, t24.yxzw, s0, l(0.000000)
    mul r14.xyz, r6.yyyy, r15.xyzx
  else 
    mov r13.xyz, l(0,0,0,0)
    mov r14.xyz, l(0,0,0,0)
  endif 
  add r12.xyz, r12.xyzx, r13.xyzx
  add r11.xyz, r11.xyzx, r14.xyzx
  iadd r9.w, r9.w, l(1)
endloop 
add r1.x, r10.x, l(-1.000000)
mad r1.x, cb0[8].y, r1.x, l(1.000000)
mul r1.xyz, r1.xxxx, r12.xyzx
mul r1.xyz, r1.xyzx, r8.xyzx
mul r1.xyz, r1.xyzx, l(0.318309873, 0.318309873, 0.318309873, 0.000000)
mul r2.xyz, r11.xyzx, l(0.318309873, 0.318309873, 0.318309873, 0.000000)
if_z r3.x
  mad r2.xyz, r11.xyzx, l(0.318309873, 0.318309873, 0.318309873, 0.000000), r1.xyzx
  mov r1.xyz, l(0,0,0,0)
endif 
mul r2.xyz, r2.xyzx, cb0[4].zzzz
min r2.xyz, r2.xyzx, l(65504.000000, 65504.000000, 65504.000000, 0.000000)
mov r2.w, l(0)
store_uav_typed u0.xyzw, r0.xwww, r2.xyzw
mul r1.xyz, r1.xyzx, cb0[4].zzzz
min r1.xyz, r1.xyzx, l(65504.000000, 65504.000000, 65504.000000, 0.000000)
mov r1.w, l(0)
store_uav_typed u1.xyzw, r0.xyzw, r1.xyzw
ret 
// Approximately 0 instruction slots used
