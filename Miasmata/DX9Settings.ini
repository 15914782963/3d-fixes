[General]
overridemethod = 1
UseRenderedShaders=true
DumpAll=false
PresetsKeysList = 0;1;3;4;
DefVSConst1 = 250
; bCalcTexCRCatStart = 1 // Causes a crash in this game
;bCalcTexCRCatUpdate = 1

; Holding Q sets minimum separation - use for triangulation when a landmark is
; falsly obscured by an object to the left thanks to a stereo depth buffer as a
; faster alternative to disabling 3D.
[KEY0]
Key = 81
Presets = 0;1;
Type = 2
[PRES0]
UseSepSettings = true
Separation = 0x00000000

; 0 Sets default settings: HUD at arms length and original god rays
[KEY1]
Key = 48
Presets = 1;
Type = 1
[PRES1]
UseByDef = true
UseSepSettings = true
SaveSepSettings = true
Convergence = 0x3fac4a26
Separation = 0x42c80000
Const4 = 0x3f800000


; 8 pushes HUD to max depth (for triangulation)
[KEY3]
Key = 56
Presets = 3;
Type = 1
[PRES3]
Const4 = 0x00000000

; 7 HUD at arms length
[KEY4]
Key = 55
Presets = 4;
Type = 1
[PRES4]
Const4 = 0x3f800000

[VS91130BE6]
; Get the world view projection matrix and invert it so we can fix the water
UseMatrix = true
GetMatrixFromReg = 0
InverseMatrix = true
MatrixReg = 180
PresIndex = 5
[PRES5]
; Used to signify when the depth information copied from the refr_sampler in
; the water shader is valid. For some reason this only worked with PresIndex in
; the vertex shader, not the pixel shader.
Const2 = 0x3f800000

[PS9D163CBC]
; Water pixel shader.
; w component of refr_sampler has the scene depth
; How do I know this? The water was the only surface with a halo around nearer
; objects, which suggests it had access to the depth buffer in some way (it
; would use this to calculate the water opacity based on depth). None of the
; sampler names sounded promising, so I determined that the texkill instruction
; caused the halo (removing it removed the halo), so from there it was a simple
; matter of looking at the samplers that provided input to that instruction and
; directly outputing the contents of the sampler to identify the channel with
; the depth information.
GetSampler1FromReg = 3

[VS6B0F82ED]
; 6B0F82ED - all in-game icons seem to use the same texture from
; TEXTURESLOG.txt, and bCalcTexCRCatStart causes the game to crash :(
; Copy depth buffer into this shader for stereo cursor:
SetSampler1ToReg = 260
[VB6B0F82ED.0]

[VS0326C994]
; Light shaft shader - uses this matrix to determine the correction amount in world-coordinates
UseMatrix = true
MatrixReg = 180

[PS6644E822]
; Light shafts - we don't stereoize at edges to avoid clipping, pass in view
; size to allow the shader to find the screen position
DefPSViewSizeConst = 222
