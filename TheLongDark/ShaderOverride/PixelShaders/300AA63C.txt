// CRC32: 300AA63C | Unity headers extracted from BlendModesOverlay.shader
// Shader "Hidden/BlendModesOverlay" {
//   Properties {
//    _MainTex ("Screen Blended", 2D) = "" {}
//    _Overlay ("Color", 2D) = "grey" {}
//   }
//   Fallback Off
//   SubShader 1/1 {
//     Pass 4/5 {
//       ZTest Always
//       ZWrite Off
//       Cull Off
//       Fog { Mode Off }
//       ColorMask RGB
//       Program "fp" {
//         SubProgram "d3d9 " {
//           Float 0 [_Intensity]
//           SetTexture 0 [_Overlay] 2D 0
//           SetTexture 1 [_MainTex] 2D 1
//         }
//       }
//     }
//   }
// }
// 
// Headers extracted with DarkStarSword's extract_unity_shaders.py
// https://raw.githubusercontent.com/DarkStarSword/3d-fixes/master/extract_unity_shaders.py

    ps_3_0 // Converted from ps_2_0 with DarkStarSword's shadertool.py
    dcl_2d s0
    dcl_2d s1
    def c1, -0.5, 1, 0, 2

def c220, 0, 1, 0.0625, 0.6
dcl_2d s13

    dcl_texcoord v0.xy
    dcl_texcoord1 v1.xy

// Lens grit. Adjusting the sample coordinates to adjust the depth of this
// effect doesn't really help

    texld r0, v0, s0

// Instead, optionally disable lens grit - set to 0.6 to approximately match
// original brightness:
mov r20, c200
if_eq r20.y, c220.x
	mov r0, c220.wwww
endif

    texld r1, v1, s1
    add_pp r2.xyz, r1, c1.x
    cmp_pp r2.xyz, r2, c1.y, c1.z
    mul_pp r4.xyz, r1, c1.w
    add r3.xyz, -r2, c1.y
    mul r3.xyz, r3, r4
    mul r4.xyz, r0, r3
    add_pp r3.xyz, r1, c1.x
    add_pp r0.xyz, -r0, c1.y
    mad_pp r3.xyz, -r3, c1.w, c1.y
    mad_pp r0.xyz, -r3, r0, c1.y
    mad r0.xyz, r2, r0, r4
    add_pp r0.xyz, r0, -r1
    mov_pp r0.w, r1
    mad_pp r0.xyz, r0, c0.x, r1
    mov_pp oC0, r0

// approximately 17 instruction slots used (2 texture, 15 arithmetic)
